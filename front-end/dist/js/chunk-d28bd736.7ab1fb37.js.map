{"version":3,"sources":["webpack:///./src/views/dashboard/orders/Details.vue?40be","webpack:///src/views/dashboard/orders/Details.vue","webpack:///./src/views/dashboard/orders/Details.vue?a29e","webpack:///./src/views/dashboard/orders/Details.vue?f34c","webpack:///./src/api/selections.js","webpack:///./src/api/orders.js","webpack:///./src/views/dashboard/orders/Details.vue?b105"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","proxy","model","value","temp","visit","callback","$$v","$set","expression","visittypes","statusCodes","contactors","addresses","author","_l","attach","i","uri","$vuetify","breakpoint","smAndDown","item","colors","_v","_s","nodename","status_code","team","team_member","opinion_text","canAudit","id","_e","staticRenderFns","name","components","AddAuditDialog","filters","statusFilter","published","draft","deleted","statusMap","status","data","listLoading","details","attachments","rules","users","computed","isAdminRole","$store","getters","role","slug","created","fetchData","getVisittypesList","methods","goBack","$router","go","arr","map","isAuthor","currentUserId","userId","setTimeout","getContactorsListbyCustomerId","getAddressesListbyCustomerId","editOrder","getNamefromOptions","options","forEach","showname","display_name","getSortClass","sort","component","VAutocomplete","VCard","VCardText","VCardTitle","VCarousel","VCarouselItem","VCol","VContainer","VDivider","VImg","VRow","VTextField","VTextarea","VTimeline","VTimelineItem","fetchProvincesList","request","url","method","fetchCitesListbyProvinceID","provinceId","fetchCustomersList","fetchContactorsListbyCustomerId","customerId","fetchAddressesListbyCustomerId","fetchVisittypesList","fetchOrders","query","params","fetchOrder","updateOrder"],"mappings":"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","file":"js/chunk-d28bd736.7ab1fb37.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"px-4 py-0\",attrs:{\"fluid\":\"\"},scopedSlots:_vm._u([{key:\"after-heading\",fn:function(){return undefined},proxy:true}])},[_c('v-card',{staticClass:\"pt-6\"},[_c('div',{staticClass:\"px-10 pb-5\",attrs:{\"height\":\"800px\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"7\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-text-field',{attrs:{\"color\":\"yellow darken-3\",\"label\":\"客户名称\",\"hint\":\"\",\"required\":\"\",\"disabled\":\"\",\"prepend-icon\":\"mdi-account-group\"},model:{value:(_vm.temp.visit.customer_name),callback:function ($$v) {_vm.$set(_vm.temp.visit, \"customer_name\", $$v)},expression:\"temp.visit.customer_name\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.visittypes,\"item-text\":\"name\",\"item-value\":\"id\",\"label\":\"拜访类型\",\"placeholder\":\"\",\"prepend-icon\":\"mdi-alpha-t-circle\",\"disabled\":\"\"},model:{value:(_vm.temp.visit.visittype_id),callback:function ($$v) {_vm.$set(_vm.temp.visit, \"visittype_id\", $$v)},expression:\"temp.visit.visittype_id\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"2\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.statusCodes,\"item-text\":\"display_name\",\"item-value\":\"key\",\"label\":\"状态\",\"placeholder\":\"\",\"prepend-icon\":\"mdi-alpha-s-box\",\"disabled\":\"\"},model:{value:(_vm.temp.status_code),callback:function ($$v) {_vm.$set(_vm.temp, \"status_code\", $$v)},expression:\"temp.status_code\"}})],1)],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"7\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-text-field',{attrs:{\"color\":\"yellow darken-3\",\"label\":\"档案编号\",\"hint\":\"\",\"required\":\"\",\"disabled\":\"\",\"prepend-icon\":\"mdi-file\"},model:{value:(_vm.temp.document_code),callback:function ($$v) {_vm.$set(_vm.temp, \"document_code\", $$v)},expression:\"temp.document_code\"}})],1)],1)],1)],1),_c('v-row',[_c('v-col',[_c('v-autocomplete',{attrs:{\"items\":_vm.contactors,\"item-text\":\"name\",\"item-value\":\"id\",\"label\":\"联系人\",\"placeholder\":\"本次拜访接待人员\",\"prepend-icon\":\"mdi-account-search-outline\",\"multiple\":\"\",\"chips\":\"\",\"disabled\":\"\"},model:{value:(_vm.temp.visit.contactorids),callback:function ($$v) {_vm.$set(_vm.temp.visit, \"contactorids\", $$v)},expression:\"temp.visit.contactorids\"}})],1)],1),_c('v-row',[_c('v-col',[_c('v-autocomplete',{attrs:{\"items\":_vm.addresses,\"item-text\":\"name\",\"item-value\":\"id\",\"label\":\"拜访地址\",\"placeholder\":\"\",\"prepend-icon\":\"mdi-alpha-t-circle\",\"disabled\":\"\"},model:{value:(_vm.temp.visit.address_id),callback:function ($$v) {_vm.$set(_vm.temp.visit, \"address_id\", $$v)},expression:\"temp.visit.address_id\"}})],1)],1),_c('v-divider',{staticClass:\"mt-12\"}),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-text-field',{attrs:{\"color\":\"yellow darken-3\",\"label\":\"标题\",\"hint\":\"简述此次拜访目的\",\"required\":\"\",\"prepend-icon\":\"mdi-subtitles\",\"disabled\":\"\"},model:{value:(_vm.temp.visit.title),callback:function ($$v) {_vm.$set(_vm.temp.visit, \"title\", $$v)},expression:\"temp.visit.title\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"color\":\"yellow darken-3\",\"label\":\"创建者\",\"required\":\"\",\"disabled\":\"\",\"prepend-icon\":\"mdi-account\"},model:{value:(_vm.temp.visit.author.name),callback:function ($$v) {_vm.$set(_vm.temp.visit.author, \"name\", $$v)},expression:\"temp.visit.author.name\"}})],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"5\"}},[_c('v-carousel',{attrs:{\"cycle\":\"\",\"height\":\"300\",\"show-arrows-on-hover\":\"\",\"delimiter-icon\":\"mdi-minus\"}},_vm._l((_vm.temp.visit.attachments),function(attach,i){return _c('v-carousel-item',{key:i},[_c('v-row',{staticClass:\"fill-height\",attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-img',{attrs:{\"max-height\":\"600\",\"src\":attach.uri}})],1)],1)}),1)],1)],1),_c('v-textarea',{attrs:{\"color\":\"yellow darken-3\",\"label\":\"描述拜访经过和成果\",\"hint\":\"\",\"required\":\"\",\"prepend-icon\":\"mdi-content-copy\",\"auto-grow\":\"\",\"disabled\":\"\"},model:{value:(_vm.temp.visit.description),callback:function ($$v) {_vm.$set(_vm.temp.visit, \"description\", $$v)},expression:\"temp.visit.description\"}})],1),_c('div',{staticClass:\"px-10 pb-5\",attrs:{\"height\":\"800px\"}},[_c('v-timeline',{attrs:{\"align-top\":\"\",\"dense\":_vm.$vuetify.breakpoint.smAndDown}},_vm._l((_vm.temp.orderrecs),function(item,i){return _c('v-timeline-item',{key:i,attrs:{\"fill-dot\":\"\",\"color\":_vm.colors[i]}},[_c('v-card',{attrs:{\"color\":_vm.colors[i],\"dark\":\"\"}},[_c('v-card-title',{staticClass:\"text-h6\"},[_vm._v(\" \"+_vm._s(i + 1)+\". \"+_vm._s(item.nodename)+\"status_code:\"+_vm._s(item.status_code)+\" \")]),_c('v-card-text',{staticClass:\"white text--primary\"},[_c('p',[_vm._v(\" \"+_vm._s(item.team.team_member)+\" \")]),_c('p',[_vm._v(\" \"+_vm._s(item.opinion_text)+\" \")]),(\n                  _vm.canAudit(item.team.team_member) && item.status_code === 0\n                )?_c('div',[_c('add-audit-dialog',{attrs:{\"orderrec-id\":item.id}})],1):_vm._e()])],1)],1)}),1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container fluid class=\"px-4 py-0\">\r\n    <template v-slot:after-heading> </template>\r\n    <v-card class=\"pt-6\">\r\n      <div class=\"px-10 pb-5\" height=\"800px\">\r\n        <v-row>\r\n          <v-col cols=\"12\" md=\"7\">\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"8\">\r\n                <v-text-field\r\n                  v-model=\"temp.visit.customer_name\"\r\n                  color=\"yellow darken-3\"\r\n                  label=\"客户名称\"\r\n                  hint=\"\"\r\n                  required\r\n                  disabled\r\n                  prepend-icon=\"mdi-account-group\"\r\n                ></v-text-field\r\n              ></v-col>\r\n              <v-col cols=\"12\" md=\"2\">\r\n                <v-autocomplete\r\n                  v-model=\"temp.visit.visittype_id\"\r\n                  :items=\"visittypes\"\r\n                  item-text=\"name\"\r\n                  item-value=\"id\"\r\n                  label=\"拜访类型\"\r\n                  placeholder=\"\"\r\n                  prepend-icon=\"mdi-alpha-t-circle\"\r\n                  disabled\r\n                ></v-autocomplete>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"2\">\r\n                <v-autocomplete\r\n                  v-model=\"temp.status_code\"\r\n                  :items=\"statusCodes\"\r\n                  item-text=\"display_name\"\r\n                  item-value=\"key\"\r\n                  label=\"状态\"\r\n                  placeholder=\"\"\r\n                  prepend-icon=\"mdi-alpha-s-box\"\r\n                  disabled\r\n                ></v-autocomplete>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"7\">\r\n                <v-row>\r\n                  <v-col cols=\"12\" md=\"8\">\r\n                    <v-text-field\r\n                      v-model=\"temp.document_code\"\r\n                      color=\"yellow darken-3\"\r\n                      label=\"档案编号\"\r\n                      hint=\"\"\r\n                      required\r\n                      disabled\r\n                      prepend-icon=\"mdi-file\"\r\n                    ></v-text-field\r\n                  ></v-col>\r\n                </v-row>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row>\r\n              <v-col>\r\n                <v-autocomplete\r\n                  v-model=\"temp.visit.contactorids\"\r\n                  :items=\"contactors\"\r\n                  item-text=\"name\"\r\n                  item-value=\"id\"\r\n                  label=\"联系人\"\r\n                  placeholder=\"本次拜访接待人员\"\r\n                  prepend-icon=\"mdi-account-search-outline\"\r\n                  multiple\r\n                  chips\r\n                  disabled\r\n                ></v-autocomplete\r\n              ></v-col>\r\n            </v-row>\r\n\r\n            <v-row>\r\n              <v-col>\r\n                <v-autocomplete\r\n                  v-model=\"temp.visit.address_id\"\r\n                  :items=\"addresses\"\r\n                  item-text=\"name\"\r\n                  item-value=\"id\"\r\n                  label=\"拜访地址\"\r\n                  placeholder=\"\"\r\n                  prepend-icon=\"mdi-alpha-t-circle\"\r\n                  disabled\r\n                ></v-autocomplete>\r\n              </v-col>\r\n            </v-row>\r\n            <v-divider class=\"mt-12\" />\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"8\">\r\n                <v-text-field\r\n                  v-model=\"temp.visit.title\"\r\n                  color=\"yellow darken-3\"\r\n                  label=\"标题\"\r\n                  hint=\"简述此次拜访目的\"\r\n                  required\r\n                  prepend-icon=\"mdi-subtitles\"\r\n                  disabled\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"4\">\r\n                <v-text-field\r\n                  v-model=\"temp.visit.author.name\"\r\n                  color=\"yellow darken-3\"\r\n                  label=\"创建者\"\r\n                  required\r\n                  disabled\r\n                  prepend-icon=\"mdi-account\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n          </v-col>\r\n\r\n          <v-col cols=\"12\" md=\"5\">\r\n            <v-carousel\r\n              cycle\r\n              height=\"300\"\r\n              show-arrows-on-hover\r\n              delimiter-icon=\"mdi-minus\"\r\n            >\r\n              <v-carousel-item\r\n                v-for=\"(attach, i) in temp.visit.attachments\"\r\n                :key=\"i\"\r\n              >\r\n                <v-row class=\"fill-height\" align=\"center\" justify=\"center\">\r\n                  <v-img max-height=\"600\" :src=\"attach.uri\"></v-img>\r\n                </v-row>\r\n              </v-carousel-item>\r\n            </v-carousel>\r\n          </v-col>\r\n        </v-row>\r\n\r\n        <v-textarea\r\n          v-model=\"temp.visit.description\"\r\n          color=\"yellow darken-3\"\r\n          label=\"描述拜访经过和成果\"\r\n          hint=\"\"\r\n          required\r\n          prepend-icon=\"mdi-content-copy\"\r\n          auto-grow\r\n          disabled\r\n        ></v-textarea>\r\n      </div>\r\n      <div class=\"px-10 pb-5\" height=\"800px\">\r\n        <v-timeline align-top :dense=\"$vuetify.breakpoint.smAndDown\">\r\n          <v-timeline-item\r\n            v-for=\"(item, i) in temp.orderrecs\"\r\n            :key=\"i\"\r\n            fill-dot\r\n            :color=\"colors[i]\"\r\n          >\r\n            <v-card :color=\"colors[i]\" dark>\r\n              <v-card-title class=\"text-h6\">\r\n                {{ i + 1 }}. {{ item.nodename }}status_code:{{\r\n                  item.status_code\r\n                }}\r\n              </v-card-title>\r\n              <v-card-text class=\"white text--primary\">\r\n                <p>\r\n                  {{ item.team.team_member }}\r\n                </p>\r\n                <p>\r\n                  {{ item.opinion_text }}\r\n                </p>\r\n                <div\r\n                  v-if=\"\r\n                    canAudit(item.team.team_member) && item.status_code === 0\r\n                  \"\r\n                >\r\n                  <add-audit-dialog :orderrec-id=\"item.id\" />\r\n                </div>\r\n              </v-card-text>\r\n            </v-card>\r\n          </v-timeline-item>\r\n        </v-timeline>\r\n      </div>\r\n    </v-card>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { fetchOrder, updateOrder } from '@/api/orders'\r\nimport {\r\n  fetchVisittypesList,\r\n  fetchContactorsListbyCustomerId,\r\n  fetchAddressesListbyCustomerId,\r\n} from '@/api/selections'\r\n\r\nconst statusCodes = [\r\n  { key: 0, display_name: '新建' },\r\n  { key: 1, display_name: '提审' },\r\n  { key: 2, display_name: '完成' },\r\n  { key: 3, display_name: '通过' },\r\n  { key: 9, display_name: '驳回' },\r\n]\r\nexport default {\r\n  name: 'OrderDetails',\r\n  components: {\r\n    AddAuditDialog: () => import('./addAuditDialog'),\r\n  },\r\n  filters: {\r\n    statusFilter(status) {\r\n      const statusMap = {\r\n        published: 'success',\r\n        draft: 'info',\r\n        deleted: 'danger',\r\n      }\r\n      return statusMap[status]\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      statusCodes,\r\n      listLoading: false,\r\n      contactors: [],\r\n      addresses: [],\r\n      visittypes: [],\r\n      details: null,\r\n      temp: {\r\n        attachments: [],\r\n        visit: {\r\n          author: {},\r\n        },\r\n      },\r\n      rules: {},\r\n      users: [],\r\n      colors: [\r\n        '#0099CC',\r\n        '#FF6666',\r\n        '#FFCCCC',\r\n        '#0099CC',\r\n        '#FF6666',\r\n        '#FFCCCC',\r\n      ],\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    isAdminRole() {\r\n      if (this.$store.getters.role.slug === 'administrator') {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.fetchData()\r\n    this.getVisittypesList()\r\n  },\r\n\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1)\r\n    },\r\n\r\n    canAudit(arr) {\r\n      const currentUserId = this.$store.getters.userId\r\n      return arr.map(el => el.id).includes(currentUserId)\r\n    },\r\n\r\n    isAuthor(userId) {\r\n      const currentUserId = this.$store.getters.userId\r\n      return currentUserId === userId\r\n    },\r\n\r\n    fetchData() {\r\n      this.listLoading = true\r\n      const id = this.$route.params && this.$route.params.id\r\n      fetchOrder(id).then(response => {\r\n        this.temp = response.data\r\n        this.getContactorsListbyCustomerId(this.temp.visit.customer_id)\r\n        this.getAddressesListbyCustomerId(this.temp.visit.customer_id)\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 5 * 1000)\r\n      })\r\n    },\r\n\r\n    getContactorsListbyCustomerId(id) {\r\n      fetchContactorsListbyCustomerId(id).then(response => {\r\n        this.contactors = response.data.items\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 1.5 * 1000)\r\n      })\r\n    },\r\n\r\n    getAddressesListbyCustomerId(id) {\r\n      fetchAddressesListbyCustomerId(id).then(response => {\r\n        this.addresses = response.data.items\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 1.5 * 1000)\r\n      })\r\n    },\r\n\r\n    editOrder() {\r\n      this.listLoading = true\r\n      const id = this.$route.params && this.$route.params.id\r\n      updateOrder(id, this.temp).then(response => {\r\n        this.temp = response.data\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 5 * 1000)\r\n      })\r\n    },\r\n\r\n    getVisittypesList() {\r\n      fetchVisittypesList().then(response => {\r\n        this.visittypes = response.data.items\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 1.5 * 1000)\r\n      })\r\n    },\r\n\r\n    getNamefromOptions(options, key) {\r\n      // return options[key]\r\n      let showname = ''\r\n      options.forEach(item => {\r\n        if (item.key === key) {\r\n          // console.log(key, item.key, item.display_name)\r\n          showname = item.display_name\r\n        }\r\n      })\r\n      return showname\r\n    },\r\n\r\n    getSortClass: function(key) {\r\n      const sort = this.listQuery.sort\r\n      return sort === `+${key}` ? 'ascending' : 'descending'\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n/* .v-overflow-btn .v-input__slot::before {\r\n  border-color: grey !important;\r\n} */\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Details.vue?vue&type=template&id=603124be&scoped=true&\"\nimport script from \"./Details.vue?vue&type=script&lang=js&\"\nexport * from \"./Details.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Details.vue?vue&type=style&index=0&id=603124be&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"603124be\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCarousel } from 'vuetify/lib/components/VCarousel';\nimport { VCarouselItem } from 'vuetify/lib/components/VCarousel';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\nimport { VTimeline } from 'vuetify/lib/components/VTimeline';\nimport { VTimelineItem } from 'vuetify/lib/components/VTimeline';\ninstallComponents(component, {VAutocomplete,VCard,VCardText,VCardTitle,VCarousel,VCarouselItem,VCol,VContainer,VDivider,VImg,VRow,VTextField,VTextarea,VTimeline,VTimelineItem})\n","import request from '@/utils/request'\r\n\r\nexport function fetchProvincesList() {\r\n  return request({\r\n    url: '/selections/provinces',\r\n    method: 'get',\r\n  })\r\n}\r\n\r\nexport function fetchCitesListbyProvinceID(provinceId) {\r\n  return request({\r\n    url: `/selections/cities/${provinceId}`,\r\n    method: 'get',\r\n  })\r\n}\r\n\r\nexport function fetchCustomersList() {\r\n  return request({\r\n    url: '/selections/customers',\r\n    method: 'get',\r\n  })\r\n}\r\n\r\nexport function fetchContactorsListbyCustomerId(customerId) {\r\n  return request({\r\n    url: `/selections/contactors/${customerId}`,\r\n    method: 'get',\r\n  })\r\n}\r\n\r\nexport function fetchAddressesListbyCustomerId(customerId) {\r\n  return request({\r\n    url: `/selections/addresses/${customerId}`,\r\n    method: 'get',\r\n  })\r\n}\r\n\r\nexport function fetchVisittypesList() {\r\n  return request({\r\n    url: '/selections/visittypes',\r\n    method: 'get',\r\n  })\r\n}\r\n","import request from '@/utils/request'\r\n\r\nexport function fetchOrders(query) {\r\n  return request({\r\n    url: '/orders',\r\n    method: 'get',\r\n    params: query,\r\n  })\r\n}\r\n\r\nexport function fetchOrder(id) {\r\n  return request({\r\n    url: `/orders/${id}`,\r\n    method: 'get',\r\n  })\r\n}\r\n\r\nexport function updateOrder(id, data) {\r\n  return request({\r\n    url: `/orders/${id}`,\r\n    method: 'put',\r\n    data,\r\n  })\r\n}\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=style&index=0&id=603124be&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Details.vue?vue&type=style&index=0&id=603124be&scoped=true&lang=css&\""],"sourceRoot":""}