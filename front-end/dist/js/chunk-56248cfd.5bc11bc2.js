(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56248cfd"],{"05a4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"px-4 py-0",attrs:{fluid:""},scopedSlots:t._u([{key:"after-heading",fn:function(){},proxy:!0}])},[n("v-row",{staticClass:"d-flex justify-space-between mx-1 mb-5"},[n("v-col",{attrs:{cols:"6",md:"10"}},[n("v-text-field",{staticClass:"ml-auto",staticStyle:{"max-width":"360px"},attrs:{"append-icon":"mdi-magnify",label:"Search: 登录名，姓名，微信昵称","hide-details":"","single-line":""},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1)],1),n("v-divider",{staticClass:"mt-3"}),n("v-simple-table",{staticClass:"pa-3",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("ID")]),n("th",[t._v("账号")]),n("th",[t._v("用户名称")]),n("th",[t._v("角色")]),n("th",{staticClass:"text-right"},[t._v("活跃指数")]),n("th",[t._v("手机号码")]),n("th",[t._v("状态")]),n("th",[t._v("创建时间")]),n("th",[t._v("最后一次访问")])])]),n("tbody",t._l(t.items,(function(e){return n("tr",{key:e.id},[n("td",[t._v(" "+t._s(e.id)+" ")]),n("td",[t._v(" "+t._s(e.username?e.username:"-")+" ")]),n("td",[t._v(t._s(e.name?e.name:"-"))]),n("td",[t._v(" "+t._s(e.role.name?e.role.name:"-")+" ")]),n("td",{staticClass:"text-right"},[t._v(" "+t._s(e.login_counts)+" ")]),n("td",[t._v(" "+t._s(e.phone?e.phone:"-")+" ")]),n("td",[t._v(" "+t._s(t.getNamefromOptions(t.userStatusOptions,e.status_code))+" ")]),n("td",[t._v(" "+t._s(t.$moment(e.member_since).format("YYYY-MM-DD HH:mm:ss"))+" ")]),n("td",[t._v(" "+t._s(t.$moment(e.last_seen).fromNow())+" ")])])})),0)]},proxy:!0}])}),n("div",{staticClass:"text-center"},[n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-pagination",{attrs:{circle:t.circle,disabled:t.disabled,length:t.total_pages,"next-icon":t.nextIcon,"prev-icon":t.prevIcon,"total-visible":t.totalVisible,value:t.listQuery.page},on:{input:t.paginationChangeHandler},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}})],1)],1),n("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},i=[],s=(n("4160"),n("caad"),n("2532"),n("159b"),n("2612")),o=[{key:0,display_name:"待审核"},{key:1,display_name:"正常"},{key:2,display_name:"未通过"},{key:3,display_name:"驳回"}],r={name:"Users",components:{},data:function(){return{snackbar:!1,text:"",timeout:3e3,action:{color:"info",icon:"mdi-blur"},items:[],listQuery:{page:1,limit:100,name:void 0,status:void 0,sort:"+id"},userStatusOptions:o,circle:!0,disabled:!1,length:10,nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left",totalVisible:10,total_pages:0}},computed:{isAdminRole:function(){return!!this.$store.getters.roles.includes("admin")}},watch:{search:function(t){var e=this;this.awaitingSearch||setTimeout((function(){e.getList(),e.awaitingSearch=!1}),6e3),this.awaitingSearch=!0}},created:function(){this.getList()},methods:{getQuery:function(){var t=this;setTimeout((function(){return t.getList()}),500)},getList:function(){var t=this;this.listLoading=!0,Object(s["c"])(this.listQuery).then((function(e){t.items=e.data.items,t.total_pages=e.data._meta.total_pages,console.log(t.items),setTimeout((function(){t.listLoading=!1}),1500)}))},handleToDetails:function(t){this.$router.push({name:"读者详情",params:{id:t.id}})},removeAuthor:function(t){var e=this;this.$confirm("确认删除读者账号?").then((function(n){n&&Object(s["b"])(t.id).then((function(t){e.getList(),e.text="作者删除成功！",e.snackbar=!0}))}))},getNamefromOptions:function(t,e){var n="";return t.forEach((function(t){t.key===e&&(n=t.display_name)})),n},paginationChangeHandler:function(t){this.listQuery.page=t,this.getList()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}}},c=r,l=(n("5bed"),n("2877")),u=n("6544"),d=n.n(u),m=n("62ad"),f=n("a523"),h=n("ce7e"),p=n("891e"),v=n("0fd9"),_=n("1f4f"),g=n("2db4"),b=n("8654"),y=Object(l["a"])(c,a,i,!1,null,"3e861580",null);e["default"]=y.exports;d()(y,{VCol:m["a"],VContainer:f["a"],VDivider:h["a"],VPagination:p["a"],VRow:v["a"],VSimpleTable:_["a"],VSnackbar:g["a"],VTextField:b["a"]})},2612:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));var a=n("b775");function i(t){return Object(a["a"])({url:"/users",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/users",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/users/".concat(t),method:"delete"})}},"5bed":function(t,e,n){"use strict";var a=n("cf4c"),i=n.n(a);i.a},cf4c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-56248cfd.5bc11bc2.js.map