{"version":3,"sources":["webpack:///./src/api/users.js","webpack:///./src/views/pages/Register.vue?aa9d","webpack:///src/views/pages/Register.vue","webpack:///./src/views/pages/Register.vue?d490","webpack:///./src/views/pages/Register.vue?9828","webpack:///./src/views/pages/Register.vue?5eba"],"names":["fetchUsers","query","request","url","method","params","createUser","data","deleteUser","id","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","_v","proxy","ref","model","value","registerForm","callback","$$v","$set","expression","nativeOn","$event","type","indexOf","_k","keyCode","onSubmit","on","staticRenderFns","name","components","PagesBtn","href","icon","iconColor","methods","errors","username","usernameError","nameError","email","emailError","password","passwordError","confirm_email_base_url","validEmail","re","test","component","VCardText","VCard","VContainer","VForm","VRow","VSlideYTransition","VTextField"],"mappings":"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","file":"js/chunk-c7b00a1e.a01f59c4.js","sourcesContent":["import request from '@/utils/request'\r\n\r\nexport function fetchUsers(query) {\r\n  return request({\r\n    url: '/users',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\nexport function fetchUser(id) {\r\n  return request({\r\n    url: `/users/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport function createUser(data) {\r\n  return request({\r\n    url: '/users',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\nexport function updateUser(id, data) {\r\n  return request({\r\n    url: `/users/${id}`,\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport function deleteUser(id) {\r\n  return request({\r\n    url: `/users/${id}`,\r\n    method: 'delete'\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"fill-height justify-center\",attrs:{\"id\":\"register\",\"tag\":\"section\"}},[_c('v-row',{attrs:{\"justify\":\"left\"}},[_c('v-slide-y-transition',{attrs:{\"appear\":\"\"}},[_c('base-material-card',{staticClass:\"px-5 py-3\",attrs:{\"color\":\"success\",\"light\":\"\",\"max-width\":\"100%\",\"width\":\"500\"},scopedSlots:_vm._u([{key:\"heading\",fn:function(){return [_c('div',{staticClass:\"text-center\"},[_c('h1',{staticClass:\"display-2 font-weight-bold mb-2\"},[_vm._v(\" 注册页面 \")])])]},proxy:true}])},[_c('v-card-text',{staticClass:\"text-center\"},[_c('div',{staticClass:\"my-2\"}),_c('v-form',{ref:\"registerForm\",attrs:{\"lazy-validation\":\"\"}},[_c('v-text-field',{staticClass:\"mb-8\",attrs:{\"color\":\"secondary\",\"label\":\"Username ...\",\"counter\":10,\"prepend-icon\":\"mdi-face-man\",\"required\":\"\"},model:{value:(_vm.registerForm.username),callback:function ($$v) {_vm.$set(_vm.registerForm, \"username\", $$v)},expression:\"registerForm.username\"}}),_c('v-text-field',{staticClass:\"mb-8\",attrs:{\"color\":\"secondary\",\"label\":\"Your full name ...\",\"counter\":10,\"prepend-icon\":\"mdi-account\",\"required\":\"\"},model:{value:(_vm.registerForm.name),callback:function ($$v) {_vm.$set(_vm.registerForm, \"name\", $$v)},expression:\"registerForm.name\"}}),_c('v-text-field',{staticClass:\"mb-8\",attrs:{\"color\":\"secondary\",\"label\":\"Email ...\",\"counter\":10,\"prepend-icon\":\"mdi-email\",\"required\":\"\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}}),_c('v-text-field',{staticClass:\"mb-8\",attrs:{\"color\":\"secondary\",\"label\":\"Password...\",\"type\":\"password\",\"prepend-icon\":\"mdi-lock-outline\",\"required\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onSubmit($event)}},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}}),_c('pages-btn',{staticClass:\"mr-4\",attrs:{\"color\":\"success\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\" 提交注册 \")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container id=\"register\" class=\"fill-height justify-center\" tag=\"section\">\n    <v-row justify=\"left\">\n      <v-slide-y-transition appear>\n        <base-material-card\n          color=\"success\"\n          light\n          max-width=\"100%\"\n          width=\"500\"\n          class=\"px-5 py-3\"\n        >\n          <template v-slot:heading>\n            <div class=\"text-center\">\n              <h1 class=\"display-2 font-weight-bold mb-2\">\n                注册页面\n              </h1>\n            </div>\n          </template>\n\n          <v-card-text class=\"text-center\">\n            <!-- <v-btn\n              v-for=\"(social, i) in socials\"\n              :key=\"i\"\n              :color=\"social.iconColor\"\n              class=\"my-2 mr-1\"\n              dark\n              depressed\n              fab\n              small\n            >\n              <v-icon v-text=\"social.icon\" />\n            </v-btn> -->\n\n            <div class=\"my-2\" />\n            <v-form ref=\"registerForm\" lazy-validation>\n              <v-text-field\n                v-model=\"registerForm.username\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Username ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-face-man\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.name\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Your full name ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-account\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.email\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Email ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-email\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.password\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Password...\"\n                type=\"password\"\n                prepend-icon=\"mdi-lock-outline\"\n                required\n                @keyup.enter.native=\"onSubmit\"\n              />\n\n              <!-- <v-checkbox :input-value=\"true\" color=\"secondary\">\n                <template v-slot:label>\n                  <span class=\"text-no-wrap mr-2\">I agree to the</span>\n\n                  <a class=\"secondary--text ml-12 ml-sm-0\" href=\"#\">\n                    terms and conditions </a\n                  >.\n                </template>\n              </v-checkbox> -->\n\n              <pages-btn color=\"success\" class=\"mr-4\" @click=\"onSubmit\">\n                提交注册\n              </pages-btn>\n            </v-form>\n          </v-card-text>\n        </base-material-card>\n      </v-slide-y-transition>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { createUser } from '@/api/users'\nexport default {\n  name: 'PagesRegister',\n\n  components: {\n    PagesBtn: () => import('./components/Btn'),\n    // PagesHeading: () => import('./components/Heading'),\n  },\n\n  data: () => ({\n    registerForm: {\n      username: '',\n      name: '',\n      email: '',\n      password: '',\n    },\n    socials: [\n      {\n        href: '#',\n        icon: 'mdi-wechat',\n        iconColor: '#1DA1F2',\n      },\n    ],\n  }),\n\n  methods: {\n    onSubmit(e) {\n      this.registerForm.errors = 0 // 重置\n\n      if (!this.registerForm.username) {\n        this.registerForm.errors++\n        this.registerForm.usernameError = 'Username required.'\n      } else {\n        this.registerForm.usernameError = null\n      }\n\n      if (!this.registerForm.name) {\n        this.registerForm.errors++\n        this.registerForm.nameError = 'name required.'\n      } else {\n        this.registerForm.nameError = null\n      }\n\n      if (!this.registerForm.email) {\n        this.registerForm.errors++\n        this.registerForm.emailError = 'Email required.'\n      } else if (!this.validEmail(this.registerForm.email)) {\n        this.registerForm.errors++\n        this.registerForm.emailError = 'Valid email required.'\n      } else {\n        this.registerForm.emailError = null\n      }\n\n      if (!this.registerForm.password) {\n        this.registerForm.errors++\n        this.registerForm.passwordError = 'Password required.'\n      } else {\n        this.registerForm.passwordError = null\n      }\n\n      if (this.registerForm.errors > 0) {\n        // 表单验证没通过时，不继续往下执行，即不会通过 axios 调用后端API\n        return false\n      }\n      const data = {\n        confirm_email_base_url:\n          window.location.href.split('/', 4).join('/') + '/unconfirmed/?token=',\n        username: this.registerForm.username,\n        name: this.registerForm.name,\n        email: this.registerForm.email,\n        password: this.registerForm.password,\n      }\n      createUser(data).then(response => {\n        // console.log('createUser response: ', response)\n        // handle success\n        // this.$toasted.success(\n        //   'A confirmation email has been sent to you by email.',\n        //   { icon: 'fingerprint' }\n        // )\n        this.$router.push('/login')\n      })\n      // .catch(error => {\n      //   // handle error\n      //   // for (var field in error.response.data.message) {\n      //   //   if (field === 'username') {\n      //   //     this.registerForm.usernameError =\n      //   //       error.response.data.message.username\n      //   //   } else if (field === 'email') {\n      //   //     this.registerForm.emailError = error.response.data.message.email\n      //   //   } else if (field === 'password') {\n      //   //     this.registerForm.passwordError =\n      //   //       error.response.data.message.password\n      //   //   }\n      //   // }\n      // })\n    },\n    validEmail: function(email) {\n      var re = /^(([^<>()\\\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      return re.test(email)\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n#register\n  .v-list-item__subtitle\n    -webkic-line-clamp: initial\n    -webkit-box-orient: initial\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=1912a635&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSlideYTransition } from 'vuetify/lib/components/transitions';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCardText,VContainer,VForm,VRow,VSlideYTransition,VTextField})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&lang=sass&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}