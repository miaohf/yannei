{"remainingRequest":"D:\\mycode\\Yanei\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mycode\\Yanei\\front-end\\src\\views\\pages\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mycode\\Yanei\\front-end\\src\\views\\pages\\Register.vue","mtime":1668962035568},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1668956708481},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1668956821544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGNyZWF0ZVVzZXIgfSBmcm9tICdAL2FwaS91c2VycycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQYWdlc1JlZ2lzdGVyJywKCiAgY29tcG9uZW50czogewogICAgUGFnZXNCdG46ICgpID0+IGltcG9ydCgnLi9jb21wb25lbnRzL0J0bicpLAogICAgLy8gUGFnZXNIZWFkaW5nOiAoKSA9PiBpbXBvcnQoJy4vY29tcG9uZW50cy9IZWFkaW5nJyksCiAgfSwKCiAgZGF0YTogKCkgPT4gKHsKICAgIHJlZ2lzdGVyRm9ybTogewogICAgICB1c2VybmFtZTogJycsCiAgICAgIG5hbWU6ICcnLAogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgIH0sCiAgICBzb2NpYWxzOiBbCiAgICAgIHsKICAgICAgICBocmVmOiAnIycsCiAgICAgICAgaWNvbjogJ21kaS13ZWNoYXQnLAogICAgICAgIGljb25Db2xvcjogJyMxREExRjInLAogICAgICB9LAogICAgXSwKICB9KSwKCiAgbWV0aG9kczogewogICAgb25TdWJtaXQoZSkgewogICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lcnJvcnMgPSAwIC8vIOmHjee9rgoKICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyRm9ybS51c2VybmFtZSkgewogICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLmVycm9ycysrCiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0udXNlcm5hbWVFcnJvciA9ICdVc2VybmFtZSByZXF1aXJlZC4nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0udXNlcm5hbWVFcnJvciA9IG51bGwKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lKSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uZXJyb3JzKysKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lRXJyb3IgPSAnbmFtZSByZXF1aXJlZC4nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0ubmFtZUVycm9yID0gbnVsbAogICAgICB9CgogICAgICBpZiAoIXRoaXMucmVnaXN0ZXJGb3JtLmVtYWlsKSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uZXJyb3JzKysKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbEVycm9yID0gJ0VtYWlsIHJlcXVpcmVkLicKICAgICAgfSBlbHNlIGlmICghdGhpcy52YWxpZEVtYWlsKHRoaXMucmVnaXN0ZXJGb3JtLmVtYWlsKSkgewogICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLmVycm9ycysrCiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uZW1haWxFcnJvciA9ICdWYWxpZCBlbWFpbCByZXF1aXJlZC4nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uZW1haWxFcnJvciA9IG51bGwKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyRm9ybS5wYXNzd29yZCkgewogICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLmVycm9ycysrCiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0ucGFzc3dvcmRFcnJvciA9ICdQYXNzd29yZCByZXF1aXJlZC4nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0ucGFzc3dvcmRFcnJvciA9IG51bGwKICAgICAgfQoKICAgICAgaWYgKHRoaXMucmVnaXN0ZXJGb3JtLmVycm9ycyA+IDApIHsKICAgICAgICAvLyDooajljZXpqozor4HmsqHpgJrov4fml7bvvIzkuI3nu6fnu63lvoDkuIvmiafooYzvvIzljbPkuI3kvJrpgJrov4cgYXhpb3Mg6LCD55So5ZCO56uvQVBJCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICBjb25maXJtX2VtYWlsX2Jhc2VfdXJsOgogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJy8nLCA0KS5qb2luKCcvJykgKyAnL3VuY29uZmlybWVkLz90b2tlbj0nLAogICAgICAgIHVzZXJuYW1lOiB0aGlzLnJlZ2lzdGVyRm9ybS51c2VybmFtZSwKICAgICAgICBuYW1lOiB0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lLAogICAgICAgIGVtYWlsOiB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5yZWdpc3RlckZvcm0ucGFzc3dvcmQsCiAgICAgIH0KICAgICAgY3JlYXRlVXNlcihkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZygnY3JlYXRlVXNlciByZXNwb25zZTogJywgcmVzcG9uc2UpCiAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MKICAgICAgICAvLyB0aGlzLiR0b2FzdGVkLnN1Y2Nlc3MoCiAgICAgICAgLy8gICAnQSBjb25maXJtYXRpb24gZW1haWwgaGFzIGJlZW4gc2VudCB0byB5b3UgYnkgZW1haWwuJywKICAgICAgICAvLyAgIHsgaWNvbjogJ2ZpbmdlcnByaW50JyB9CiAgICAgICAgLy8gKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKQogICAgICB9KQogICAgICAvLyAuY2F0Y2goZXJyb3IgPT4gewogICAgICAvLyAgIC8vIGhhbmRsZSBlcnJvcgogICAgICAvLyAgIC8vIGZvciAodmFyIGZpZWxkIGluIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICAvLyAgIC8vICAgaWYgKGZpZWxkID09PSAndXNlcm5hbWUnKSB7CiAgICAgIC8vICAgLy8gICAgIHRoaXMucmVnaXN0ZXJGb3JtLnVzZXJuYW1lRXJyb3IgPQogICAgICAvLyAgIC8vICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZS51c2VybmFtZQogICAgICAvLyAgIC8vICAgfSBlbHNlIGlmIChmaWVsZCA9PT0gJ2VtYWlsJykgewogICAgICAvLyAgIC8vICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbEVycm9yID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlLmVtYWlsCiAgICAgIC8vICAgLy8gICB9IGVsc2UgaWYgKGZpZWxkID09PSAncGFzc3dvcmQnKSB7CiAgICAgIC8vICAgLy8gICAgIHRoaXMucmVnaXN0ZXJGb3JtLnBhc3N3b3JkRXJyb3IgPQogICAgICAvLyAgIC8vICAgICAgIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZS5wYXNzd29yZAogICAgICAvLyAgIC8vICAgfQogICAgICAvLyAgIC8vIH0KICAgICAgLy8gfSkKICAgIH0sCiAgICB2YWxpZEVtYWlsOiBmdW5jdGlvbihlbWFpbCkgewogICAgICB2YXIgcmUgPSAvXigoW148PigpXFxbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClcXFtcXVxcLiw7OlxzQCJdKykqKXwoIi4rIikpQCgoXFtbMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XF0pfCgoW2EtekEtWlwtMC05XStcLikrW2EtekEtWl17Mix9KSkkLwogICAgICByZXR1cm4gcmUudGVzdChlbWFpbCkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";AAkGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\n  <v-container id=\"register\" class=\"fill-height justify-center\" tag=\"section\">\n    <v-row justify=\"left\">\n      <v-slide-y-transition appear>\n        <base-material-card\n          color=\"success\"\n          light\n          max-width=\"100%\"\n          width=\"500\"\n          class=\"px-5 py-3\"\n        >\n          <template v-slot:heading>\n            <div class=\"text-center\">\n              <h1 class=\"text-h3 font-weight-bold mb-2\">\n                注册页面\n              </h1>\n            </div>\n          </template>\n\n          <v-card-text class=\"text-center\">\n            <!-- <v-btn\n              v-for=\"(social, i) in socials\"\n              :key=\"i\"\n              :color=\"social.iconColor\"\n              class=\"my-2 mr-1\"\n              dark\n              depressed\n              fab\n              small\n            >\n              <v-icon v-text=\"social.icon\" />\n            </v-btn> -->\n\n            <div class=\"my-2\" />\n            <v-form ref=\"registerForm\" lazy-validation>\n              <v-text-field\n                v-model=\"registerForm.username\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Username ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-face-man\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.name\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Your full name ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-account\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.email\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Email ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-email\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.password\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Password...\"\n                type=\"password\"\n                prepend-icon=\"mdi-lock-outline\"\n                required\n                @keyup.enter.native=\"onSubmit\"\n              />\n\n              <!-- <v-checkbox :input-value=\"true\" color=\"secondary\">\n                <template v-slot:label>\n                  <span class=\"text-no-wrap mr-2\">I agree to the</span>\n\n                  <a class=\"secondary--text ml-12 ml-sm-0\" href=\"#\">\n                    terms and conditions </a\n                  >.\n                </template>\n              </v-checkbox> -->\n\n              <pages-btn color=\"success\" class=\"mr-4\" @click=\"onSubmit\">\n                提交注册\n              </pages-btn>\n            </v-form>\n          </v-card-text>\n        </base-material-card>\n      </v-slide-y-transition>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { createUser } from '@/api/users'\nexport default {\n  name: 'PagesRegister',\n\n  components: {\n    PagesBtn: () => import('./components/Btn'),\n    // PagesHeading: () => import('./components/Heading'),\n  },\n\n  data: () => ({\n    registerForm: {\n      username: '',\n      name: '',\n      email: '',\n      password: '',\n    },\n    socials: [\n      {\n        href: '#',\n        icon: 'mdi-wechat',\n        iconColor: '#1DA1F2',\n      },\n    ],\n  }),\n\n  methods: {\n    onSubmit(e) {\n      this.registerForm.errors = 0 // 重置\n\n      if (!this.registerForm.username) {\n        this.registerForm.errors++\n        this.registerForm.usernameError = 'Username required.'\n      } else {\n        this.registerForm.usernameError = null\n      }\n\n      if (!this.registerForm.name) {\n        this.registerForm.errors++\n        this.registerForm.nameError = 'name required.'\n      } else {\n        this.registerForm.nameError = null\n      }\n\n      if (!this.registerForm.email) {\n        this.registerForm.errors++\n        this.registerForm.emailError = 'Email required.'\n      } else if (!this.validEmail(this.registerForm.email)) {\n        this.registerForm.errors++\n        this.registerForm.emailError = 'Valid email required.'\n      } else {\n        this.registerForm.emailError = null\n      }\n\n      if (!this.registerForm.password) {\n        this.registerForm.errors++\n        this.registerForm.passwordError = 'Password required.'\n      } else {\n        this.registerForm.passwordError = null\n      }\n\n      if (this.registerForm.errors > 0) {\n        // 表单验证没通过时，不继续往下执行，即不会通过 axios 调用后端API\n        return false\n      }\n      const data = {\n        confirm_email_base_url:\n          window.location.href.split('/', 4).join('/') + '/unconfirmed/?token=',\n        username: this.registerForm.username,\n        name: this.registerForm.name,\n        email: this.registerForm.email,\n        password: this.registerForm.password,\n      }\n      createUser(data).then(response => {\n        // console.log('createUser response: ', response)\n        // handle success\n        // this.$toasted.success(\n        //   'A confirmation email has been sent to you by email.',\n        //   { icon: 'fingerprint' }\n        // )\n        this.$router.push('/login')\n      })\n      // .catch(error => {\n      //   // handle error\n      //   // for (var field in error.response.data.message) {\n      //   //   if (field === 'username') {\n      //   //     this.registerForm.usernameError =\n      //   //       error.response.data.message.username\n      //   //   } else if (field === 'email') {\n      //   //     this.registerForm.emailError = error.response.data.message.email\n      //   //   } else if (field === 'password') {\n      //   //     this.registerForm.passwordError =\n      //   //       error.response.data.message.password\n      //   //   }\n      //   // }\n      // })\n    },\n    validEmail: function(email) {\n      var re = /^(([^<>()\\\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      return re.test(email)\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n#register\n  .v-list-item__subtitle\n    -webkic-line-clamp: initial\n    -webkit-box-orient: initial\n</style>\n"]}]}