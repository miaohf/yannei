{"remainingRequest":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\mycode\\Yanei\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mycode\\Yanei\\front-end\\src\\views\\pages\\Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mycode\\Yanei\\front-end\\src\\views\\pages\\Register.vue","mtime":1668962035568},{"path":"D:\\mycode\\Yanei\\front-end\\babel.config.js","mtime":1580387978000},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1668956708481},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1668956821544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50ZXN0LmpzIjsKaW1wb3J0IHsgY3JlYXRlVXNlciB9IGZyb20gJ0AvYXBpL3VzZXJzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQYWdlc1JlZ2lzdGVyJywKICBjb21wb25lbnRzOiB7CiAgICBQYWdlc0J0bjogZnVuY3Rpb24gUGFnZXNCdG4oKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJy4vY29tcG9uZW50cy9CdG4nKTsKICAgIH0KICAgIC8vIFBhZ2VzSGVhZGluZzogKCkgPT4gaW1wb3J0KCcuL2NvbXBvbmVudHMvSGVhZGluZycpLAogIH0sCgogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWdpc3RlckZvcm06IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICBzb2NpYWxzOiBbewogICAgICAgIGhyZWY6ICcjJywKICAgICAgICBpY29uOiAnbWRpLXdlY2hhdCcsCiAgICAgICAgaWNvbkNvbG9yOiAnIzFEQTFGMicKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lcnJvcnMgPSAwOyAvLyDph43nva4KCiAgICAgIGlmICghdGhpcy5yZWdpc3RlckZvcm0udXNlcm5hbWUpIHsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lcnJvcnMrKzsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS51c2VybmFtZUVycm9yID0gJ1VzZXJuYW1lIHJlcXVpcmVkLic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0udXNlcm5hbWVFcnJvciA9IG51bGw7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lKSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uZXJyb3JzKys7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0ubmFtZUVycm9yID0gJ25hbWUgcmVxdWlyZWQuJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lRXJyb3IgPSBudWxsOwogICAgICB9CiAgICAgIGlmICghdGhpcy5yZWdpc3RlckZvcm0uZW1haWwpIHsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lcnJvcnMrKzsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbEVycm9yID0gJ0VtYWlsIHJlcXVpcmVkLic7CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMudmFsaWRFbWFpbCh0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbCkpIHsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lcnJvcnMrKzsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbEVycm9yID0gJ1ZhbGlkIGVtYWlsIHJlcXVpcmVkLic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uZW1haWxFcnJvciA9IG51bGw7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyRm9ybS5wYXNzd29yZCkgewogICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLmVycm9ycysrOwogICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLnBhc3N3b3JkRXJyb3IgPSAnUGFzc3dvcmQgcmVxdWlyZWQuJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5wYXNzd29yZEVycm9yID0gbnVsbDsKICAgICAgfQogICAgICBpZiAodGhpcy5yZWdpc3RlckZvcm0uZXJyb3JzID4gMCkgewogICAgICAgIC8vIOihqOWNlemqjOivgeayoemAmui/h+aXtu+8jOS4jee7p+e7reW+gOS4i+aJp+ihjO+8jOWNs+S4jeS8mumAmui/hyBheGlvcyDosIPnlKjlkI7nq69BUEkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgY29uZmlybV9lbWFpbF9iYXNlX3VybDogd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJy8nLCA0KS5qb2luKCcvJykgKyAnL3VuY29uZmlybWVkLz90b2tlbj0nLAogICAgICAgIHVzZXJuYW1lOiB0aGlzLnJlZ2lzdGVyRm9ybS51c2VybmFtZSwKICAgICAgICBuYW1lOiB0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lLAogICAgICAgIGVtYWlsOiB0aGlzLnJlZ2lzdGVyRm9ybS5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5yZWdpc3RlckZvcm0ucGFzc3dvcmQKICAgICAgfTsKICAgICAgY3JlYXRlVXNlcihkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdjcmVhdGVVc2VyIHJlc3BvbnNlOiAnLCByZXNwb25zZSkKICAgICAgICAvLyBoYW5kbGUgc3VjY2VzcwogICAgICAgIC8vIHRoaXMuJHRvYXN0ZWQuc3VjY2VzcygKICAgICAgICAvLyAgICdBIGNvbmZpcm1hdGlvbiBlbWFpbCBoYXMgYmVlbiBzZW50IHRvIHlvdSBieSBlbWFpbC4nLAogICAgICAgIC8vICAgeyBpY29uOiAnZmluZ2VycHJpbnQnIH0KICAgICAgICAvLyApCiAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgfSk7CiAgICAgIC8vIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgLy8gaGFuZGxlIGVycm9yCiAgICAgIC8vICAgLy8gZm9yICh2YXIgZmllbGQgaW4gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKSB7CiAgICAgIC8vICAgLy8gICBpZiAoZmllbGQgPT09ICd1c2VybmFtZScpIHsKICAgICAgLy8gICAvLyAgICAgdGhpcy5yZWdpc3RlckZvcm0udXNlcm5hbWVFcnJvciA9CiAgICAgIC8vICAgLy8gICAgICAgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlLnVzZXJuYW1lCiAgICAgIC8vICAgLy8gICB9IGVsc2UgaWYgKGZpZWxkID09PSAnZW1haWwnKSB7CiAgICAgIC8vICAgLy8gICAgIHRoaXMucmVnaXN0ZXJGb3JtLmVtYWlsRXJyb3IgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UuZW1haWwKICAgICAgLy8gICAvLyAgIH0gZWxzZSBpZiAoZmllbGQgPT09ICdwYXNzd29yZCcpIHsKICAgICAgLy8gICAvLyAgICAgdGhpcy5yZWdpc3RlckZvcm0ucGFzc3dvcmRFcnJvciA9CiAgICAgIC8vICAgLy8gICAgICAgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlLnBhc3N3b3JkCiAgICAgIC8vICAgLy8gICB9CiAgICAgIC8vICAgLy8gfQogICAgICAvLyB9KQogICAgfSwKCiAgICB2YWxpZEVtYWlsOiBmdW5jdGlvbiB2YWxpZEVtYWlsKGVtYWlsKSB7CiAgICAgIHZhciByZSA9IC9eKChbXjw+KClcXFtcXVxcLiw7OlxzQCJdKyhcLltePD4oKVxcW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cXSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLH0pKSQvOwogICAgICByZXR1cm4gcmUudGVzdChlbWFpbCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;AAkGA;AACA;EACAA;EAEAC;IACAC;MAAA;IAAA;IACA;EACA;;EAEAC;IAAA;MACAC;QACAC;QACAL;QACAM;QACAC;MACA;MACAC,UACA;QACAC;QACAC;QACAC;MACA;IAEA;EAAA;EAEAC;IACAC;MAAA;MACA;;MAEA;QACA;QACA;MACA;QACA;MACA;MAEA;QACA;QACA;MACA;QACA;MACA;MAEA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;MACA;MAEA;QACA;QACA;MACA;QACA;MACA;MAEA;QACA;QACA;MACA;MACA;QACAC,wBACAC;QACAV;QACAL;QACAM;QACAC;MACA;MACAS;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACAC;MACA;MACA;IACA;EACA;AACA","names":["name","components","PagesBtn","data","registerForm","username","email","password","socials","href","icon","iconColor","methods","onSubmit","confirm_email_base_url","window","createUser","validEmail"],"sourceRoot":"src/views/pages","sources":["Register.vue"],"sourcesContent":["<template>\n  <v-container id=\"register\" class=\"fill-height justify-center\" tag=\"section\">\n    <v-row justify=\"left\">\n      <v-slide-y-transition appear>\n        <base-material-card\n          color=\"success\"\n          light\n          max-width=\"100%\"\n          width=\"500\"\n          class=\"px-5 py-3\"\n        >\n          <template v-slot:heading>\n            <div class=\"text-center\">\n              <h1 class=\"text-h3 font-weight-bold mb-2\">\n                注册页面\n              </h1>\n            </div>\n          </template>\n\n          <v-card-text class=\"text-center\">\n            <!-- <v-btn\n              v-for=\"(social, i) in socials\"\n              :key=\"i\"\n              :color=\"social.iconColor\"\n              class=\"my-2 mr-1\"\n              dark\n              depressed\n              fab\n              small\n            >\n              <v-icon v-text=\"social.icon\" />\n            </v-btn> -->\n\n            <div class=\"my-2\" />\n            <v-form ref=\"registerForm\" lazy-validation>\n              <v-text-field\n                v-model=\"registerForm.username\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Username ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-face-man\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.name\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Your full name ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-account\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.email\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Email ...\"\n                :counter=\"10\"\n                prepend-icon=\"mdi-email\"\n                required\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"registerForm.password\"\n                class=\"mb-8\"\n                color=\"secondary\"\n                label=\"Password...\"\n                type=\"password\"\n                prepend-icon=\"mdi-lock-outline\"\n                required\n                @keyup.enter.native=\"onSubmit\"\n              />\n\n              <!-- <v-checkbox :input-value=\"true\" color=\"secondary\">\n                <template v-slot:label>\n                  <span class=\"text-no-wrap mr-2\">I agree to the</span>\n\n                  <a class=\"secondary--text ml-12 ml-sm-0\" href=\"#\">\n                    terms and conditions </a\n                  >.\n                </template>\n              </v-checkbox> -->\n\n              <pages-btn color=\"success\" class=\"mr-4\" @click=\"onSubmit\">\n                提交注册\n              </pages-btn>\n            </v-form>\n          </v-card-text>\n        </base-material-card>\n      </v-slide-y-transition>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { createUser } from '@/api/users'\nexport default {\n  name: 'PagesRegister',\n\n  components: {\n    PagesBtn: () => import('./components/Btn'),\n    // PagesHeading: () => import('./components/Heading'),\n  },\n\n  data: () => ({\n    registerForm: {\n      username: '',\n      name: '',\n      email: '',\n      password: '',\n    },\n    socials: [\n      {\n        href: '#',\n        icon: 'mdi-wechat',\n        iconColor: '#1DA1F2',\n      },\n    ],\n  }),\n\n  methods: {\n    onSubmit(e) {\n      this.registerForm.errors = 0 // 重置\n\n      if (!this.registerForm.username) {\n        this.registerForm.errors++\n        this.registerForm.usernameError = 'Username required.'\n      } else {\n        this.registerForm.usernameError = null\n      }\n\n      if (!this.registerForm.name) {\n        this.registerForm.errors++\n        this.registerForm.nameError = 'name required.'\n      } else {\n        this.registerForm.nameError = null\n      }\n\n      if (!this.registerForm.email) {\n        this.registerForm.errors++\n        this.registerForm.emailError = 'Email required.'\n      } else if (!this.validEmail(this.registerForm.email)) {\n        this.registerForm.errors++\n        this.registerForm.emailError = 'Valid email required.'\n      } else {\n        this.registerForm.emailError = null\n      }\n\n      if (!this.registerForm.password) {\n        this.registerForm.errors++\n        this.registerForm.passwordError = 'Password required.'\n      } else {\n        this.registerForm.passwordError = null\n      }\n\n      if (this.registerForm.errors > 0) {\n        // 表单验证没通过时，不继续往下执行，即不会通过 axios 调用后端API\n        return false\n      }\n      const data = {\n        confirm_email_base_url:\n          window.location.href.split('/', 4).join('/') + '/unconfirmed/?token=',\n        username: this.registerForm.username,\n        name: this.registerForm.name,\n        email: this.registerForm.email,\n        password: this.registerForm.password,\n      }\n      createUser(data).then(response => {\n        // console.log('createUser response: ', response)\n        // handle success\n        // this.$toasted.success(\n        //   'A confirmation email has been sent to you by email.',\n        //   { icon: 'fingerprint' }\n        // )\n        this.$router.push('/login')\n      })\n      // .catch(error => {\n      //   // handle error\n      //   // for (var field in error.response.data.message) {\n      //   //   if (field === 'username') {\n      //   //     this.registerForm.usernameError =\n      //   //       error.response.data.message.username\n      //   //   } else if (field === 'email') {\n      //   //     this.registerForm.emailError = error.response.data.message.email\n      //   //   } else if (field === 'password') {\n      //   //     this.registerForm.passwordError =\n      //   //       error.response.data.message.password\n      //   //   }\n      //   // }\n      // })\n    },\n    validEmail: function(email) {\n      var re = /^(([^<>()\\\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      return re.test(email)\n    },\n  },\n}\n</script>\n\n<style lang=\"sass\">\n#register\n  .v-list-item__subtitle\n    -webkic-line-clamp: initial\n    -webkit-box-orient: initial\n</style>\n"]}]}