{"remainingRequest":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\mycode\\Yanei\\front-end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mycode\\Yanei\\front-end\\src\\views\\dashboard\\customers\\addAddressDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mycode\\Yanei\\front-end\\src\\views\\dashboard\\customers\\addAddressDialog.vue","mtime":1655708709599},{"path":"D:\\mycode\\Yanei\\front-end\\babel.config.js","mtime":1580387978000},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1668956708481},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\vue-loader\\lib\\index.js","mtime":1668956821544}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgYWRkQ29udGFjdG9yT3JBZGRyZXNzQnlDdXN0b21lciB9IGZyb20gJ0AvYXBpL2N1c3RvbWVycyc7CmltcG9ydCB7IGZldGNoUHJvdmluY2VzTGlzdCwgZmV0Y2hDaXRlc0xpc3RieVByb3ZpbmNlSUQgfSBmcm9tICdAL2FwaS9zZWxlY3Rpb25zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZGRBZGRyZXNzRGlhbG9nJywKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvdmluY2VzOiBbXSwKICAgICAgY2l0aWVzOiBbXSwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgdGVtcDogewogICAgICAgIHR5cGU6ICdhZGRyZXNzJywKICAgICAgICBkZXBhcnRtZW50OiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRQcm92aW5jZXNMaXN0KCk7CiAgICBjb25zb2xlLmxvZygnQWRkQWRkcmVzc0RpYWxvZyAkcGFyZW50OiAnLCB0aGlzLiRwYXJlbnQpOwogIH0sCiAgbWV0aG9kczogewogICAgY29uZmlybUFkZERpYWxvZzogZnVuY3Rpb24gY29uZmlybUFkZERpYWxvZygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICB2YXIgdGVtcERhdGEgPSB0aGlzLnRlbXA7CiAgICAgIGFkZENvbnRhY3Rvck9yQWRkcmVzc0J5Q3VzdG9tZXIoaWQsIHRlbXBEYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgICBfdGhpcy50ZW1wID0gewogICAgICAgICAgdHlwZTogJ2FkZHJlc3MnLAogICAgICAgICAgYWRkcmVzczogJycKICAgICAgICB9OwogICAgICAgIC8vIHRoaXMuJHBhcmVudC4kcGFyZW50LmZldGNoRGF0YSgpCiAgICAgICAgX3RoaXMuJGVtaXQoJ2ZldGNoRGF0YScpOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxBZGREaWFsb2c6IGZ1bmN0aW9uIGNhbmNlbEFkZERpYWxvZygpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy50ZW1wID0gewogICAgICAgIHR5cGU6ICdhZGRyZXNzJywKICAgICAgICBhZGRyZXNzOiAnJwogICAgICB9OwogICAgfSwKICAgIGdldFByb3ZpbmNlc0xpc3Q6IGZ1bmN0aW9uIGdldFByb3ZpbmNlc0xpc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBmZXRjaFByb3ZpbmNlc0xpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5wcm92aW5jZXMgPSByZXNwb25zZS5kYXRhLml0ZW1zOwogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnByb3ZpbmNlczogJywgX3RoaXMyLnByb3ZpbmNlcyk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9LCAxLjUgKiAxMDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q2l0aWVzTGlzdEJ5UHJvdmluY2VJZDogZnVuY3Rpb24gZ2V0Q2l0aWVzTGlzdEJ5UHJvdmluY2VJZChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgZmV0Y2hDaXRlc0xpc3RieVByb3ZpbmNlSUQoaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLmNpdGllcyA9IHJlc3BvbnNlLmRhdGEuaXRlbXM7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9LCAxLjUgKiAxMDAwKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlQ2l0aWVzOiBmdW5jdGlvbiB1cGRhdGVDaXRpZXModmFsdWUsIHByb3ZpbmNlSWQpIHsKICAgICAgdGhpcy5nZXRDaXRpZXNMaXN0QnlQcm92aW5jZUlkKHByb3ZpbmNlSWQpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":"AAiGA;AACA,SACAA,oBACAC,kCACA;AAEA;EACAC;EACAC;EAEAC;IAAA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EAAA;EACAC;EACAC;IACA;IACAC;EACA;EACAC;IACAC;MAAA;MACA;MACA;MACAC;QACA;QACA;UAAAT;UAAAE;QAAA;QACA;QACA;MACA;IACA;IAEAQ;MACA;MACA;QAAAV;QAAAE;MAAA;IACA;IAEAS;MAAA;MACApB;QACA;QACAe;QACAM;UACA;QACA;MACA;IACA;IAEAC;MAAA;MACArB;QACA;QACAoB;UACA;QACA;MACA;IACA;IAEAE;MACA;IACA;EACA;AACA","names":["fetchProvincesList","fetchCitesListbyProvinceID","name","components","data","provinces","cities","dialog","temp","type","department","address","description","mounted","created","console","methods","confirmAddDialog","addContactorOrAddressByCustomer","cancelAddDialog","getProvincesList","setTimeout","getCitiesListByProvinceId","updateCities"],"sourceRoot":"src/views/dashboard/customers","sources":["addAddressDialog.vue"],"sourcesContent":["<template>\r\n  <v-dialog v-model=\"dialog\" max-width=\"1200\">\r\n    <template v-slot:activator=\"{ on, attrs }\">\r\n      <v-btn text small color=\"blue\" v-bind=\"attrs\" class=\"mx-1 my-2\" v-on=\"on\">\r\n        <v-icon>mdi-plus </v-icon>\r\n      </v-btn>\r\n    </template>\r\n    <v-container>\r\n      <v-card>\r\n        <div class=\"px-7 pb-5\" height=\"800px\">\r\n          <v-card-title class=\"my-10\"><h1>新增客户地址</h1></v-card-title>\r\n          <v-row>\r\n            <v-col cols=\"12\" sm=\"5\" md=\"5\">\r\n              <v-text-field\r\n                v-model=\"temp.department\"\r\n                color=\"yellow darken-3\"\r\n                label=\"部门名称\"\r\n                required\r\n                class=\"mx-6\"\r\n                prepend-icon=\"mdi-domain\"\r\n              ></v-text-field>\r\n            </v-col>\r\n          </v-row>\r\n          <v-row>\r\n            <v-col cols=\"12\" sm=\"3\" md=\"3\">\r\n              <v-autocomplete\r\n                v-model=\"temp.province_id\"\r\n                :items=\"provinces\"\r\n                item-text=\"name\"\r\n                item-value=\"id\"\r\n                label=\"省份\"\r\n                placeholder=\"省份\"\r\n                prepend-icon=\"mdi-map-search\"\r\n                class=\"mx-6\"\r\n                @change=\"event => updateCities(event, temp.province_id)\"\r\n              ></v-autocomplete>\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\" sm=\"3\" md=\"3\">\r\n              <v-autocomplete\r\n                v-model=\"temp.city_id\"\r\n                :items=\"cities\"\r\n                item-text=\"name\"\r\n                item-value=\"id\"\r\n                label=\"城市\"\r\n                placeholder=\"城市\"\r\n                prepend-icon=\"mdi-city-variant\"\r\n                class=\"mx-6\"\r\n              ></v-autocomplete>\r\n            </v-col>\r\n            <v-col cols=\"12\" sm=\"6\" md=\"6\">\r\n              <v-text-field\r\n                v-model=\"temp.address\"\r\n                color=\"yellow darken-3\"\r\n                label=\"坐落地址\"\r\n                hint=\"研一智控\"\r\n                required\r\n                class=\"mx-6\"\r\n                prepend-icon=\"mdi-map-marker-plus\"\r\n              ></v-text-field>\r\n            </v-col>\r\n          </v-row>\r\n          <v-row>\r\n            <v-textarea\r\n              v-model=\"temp.description\"\r\n              color=\"yellow darken-3\"\r\n              label=\"备注信息\"\r\n              hint=\"\"\r\n              required\r\n              class=\"mx-6\"\r\n              prepend-icon=\"mdi-information-outline\"\r\n            ></v-textarea>\r\n          </v-row>\r\n\r\n          <v-row>\r\n            <v-spacer></v-spacer>\r\n            <span class=\"mt-6 mx-3 orange--text\" style=\"font-size:14px\">\r\n              本系统由 研一智控 提供技术支持。\r\n            </span>\r\n          </v-row>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn color=\"warning\" @click=\"cancelAddDialog\">取消</v-btn>\r\n            <v-btn\r\n              color=\"primary\"\r\n              :disabled=\"temp.address.length === 0\"\r\n              @click=\"confirmAddDialog\"\r\n              >确认</v-btn\r\n            >\r\n          </v-card-actions>\r\n        </div>\r\n      </v-card>\r\n    </v-container>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { addContactorOrAddressByCustomer } from '@/api/customers'\r\nimport {\r\n  fetchProvincesList,\r\n  fetchCitesListbyProvinceID,\r\n} from '@/api/selections'\r\n\r\nexport default {\r\n  name: 'AddAddressDialog',\r\n  components: {},\r\n\r\n  data: () => ({\r\n    provinces: [],\r\n    cities: [],\r\n    dialog: false,\r\n    temp: {\r\n      type: 'address',\r\n      department: '',\r\n      address: '',\r\n      description: '',\r\n    },\r\n  }),\r\n  mounted() {},\r\n  created() {\r\n    this.getProvincesList()\r\n    console.log('AddAddressDialog $parent: ', this.$parent)\r\n  },\r\n  methods: {\r\n    confirmAddDialog() {\r\n      const id = this.$route.params.id\r\n      const tempData = this.temp\r\n      addContactorOrAddressByCustomer(id, tempData).then(() => {\r\n        this.dialog = false\r\n        this.temp = { type: 'address', address: '' }\r\n        // this.$parent.$parent.fetchData()\r\n        this.$emit('fetchData')\r\n      })\r\n    },\r\n\r\n    cancelAddDialog() {\r\n      this.dialog = false\r\n      this.temp = { type: 'address', address: '' }\r\n    },\r\n\r\n    getProvincesList() {\r\n      fetchProvincesList().then(response => {\r\n        this.provinces = response.data.items\r\n        console.log('this.provinces: ', this.provinces)\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 1.5 * 1000)\r\n      })\r\n    },\r\n\r\n    getCitiesListByProvinceId(id) {\r\n      fetchCitesListbyProvinceID(id).then(response => {\r\n        this.cities = response.data.items\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 1.5 * 1000)\r\n      })\r\n    },\r\n\r\n    updateCities(value, provinceId) {\r\n      this.getCitiesListByProvinceId(provinceId)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\"></style>\r\n"]}]}