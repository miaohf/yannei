{"remainingRequest":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js!D:\\mycode\\Yanei\\front-end\\node_modules\\vuetify\\lib\\components\\VDataTable\\VDataTable.js","dependencies":[{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\vuetify\\lib\\components\\VDataTable\\VDataTable.js","mtime":1668956706694},{"path":"D:\\mycode\\Yanei\\front-end\\babel.config.js","mtime":1580387978000},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668947705996},{"path":"D:\\mycode\\Yanei\\front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":1668956708481}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkQ6L215Y29kZS9ZYW5laS9mcm9udC1lbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJEOi9teWNvZGUvWWFuZWkvZnJvbnQtZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9teWNvZGUvWWFuZWkvZnJvbnQtZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS51bnNoaWZ0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkRhdGFUYWJsZS9WRGF0YVRhYmxlLnNhc3MiOyAvLyBDb21wb25lbnRzCgppbXBvcnQgeyBWRGF0YSB9IGZyb20gJy4uL1ZEYXRhJzsKaW1wb3J0IHsgVkRhdGFGb290ZXIsIFZEYXRhSXRlcmF0b3IgfSBmcm9tICcuLi9WRGF0YUl0ZXJhdG9yJzsKaW1wb3J0IFZCdG4gZnJvbSAnLi4vVkJ0bic7CmltcG9ydCBWRGF0YVRhYmxlSGVhZGVyIGZyb20gJy4vVkRhdGFUYWJsZUhlYWRlcic7IC8vIGltcG9ydCBWVmlydHVhbFRhYmxlIGZyb20gJy4vVlZpcnR1YWxUYWJsZScKCmltcG9ydCBWSWNvbiBmcm9tICcuLi9WSWNvbic7CmltcG9ydCBSb3cgZnJvbSAnLi9Sb3cnOwppbXBvcnQgUm93R3JvdXAgZnJvbSAnLi9Sb3dHcm91cCc7CmltcG9ydCBWU2ltcGxlQ2hlY2tib3ggZnJvbSAnLi4vVkNoZWNrYm94L1ZTaW1wbGVDaGVja2JveCc7CmltcG9ydCBWU2ltcGxlVGFibGUgZnJvbSAnLi9WU2ltcGxlVGFibGUnOwppbXBvcnQgTW9iaWxlUm93IGZyb20gJy4vTW9iaWxlUm93JzsgLy8gTWl4aW5zCgppbXBvcnQgTG9hZGFibGUgZnJvbSAnLi4vLi4vbWl4aW5zL2xvYWRhYmxlJzsgLy8gRGlyZWN0aXZlcwoKaW1wb3J0IHJpcHBsZSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL3JpcHBsZSc7IC8vIEhlbHBlcnMKCmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vdXRpbC9taXhpbnMnOwppbXBvcnQgeyBkZWVwRXF1YWwsIGdldE9iamVjdFZhbHVlQnlQYXRoLCBnZXRQcmVmaXhlZFNjb3BlZFNsb3RzLCBnZXRTbG90LCBkZWZhdWx0RmlsdGVyLCBjYW1lbGl6ZU9iamVjdEtleXMsIGdldFByb3BlcnR5RnJvbUl0ZW0gfSBmcm9tICcuLi8uLi91dGlsL2hlbHBlcnMnOwppbXBvcnQgeyBicmVha2luZyB9IGZyb20gJy4uLy4uL3V0aWwvY29uc29sZSc7CmltcG9ydCB7IG1lcmdlQ2xhc3NlcyB9IGZyb20gJy4uLy4uL3V0aWwvbWVyZ2VEYXRhJzsKZnVuY3Rpb24gZmlsdGVyRm4oaXRlbSwgc2VhcmNoLCBmaWx0ZXIpIHsKICByZXR1cm4gZnVuY3Rpb24gKGhlYWRlcikgewogICAgdmFyIHZhbHVlID0gZ2V0T2JqZWN0VmFsdWVCeVBhdGgoaXRlbSwgaGVhZGVyLnZhbHVlKTsKICAgIHJldHVybiBoZWFkZXIuZmlsdGVyID8gaGVhZGVyLmZpbHRlcih2YWx1ZSwgc2VhcmNoLCBpdGVtKSA6IGZpbHRlcih2YWx1ZSwgc2VhcmNoLCBpdGVtKTsKICB9Owp9CmZ1bmN0aW9uIHNlYXJjaFRhYmxlSXRlbXMoaXRlbXMsIHNlYXJjaCwgaGVhZGVyc1dpdGhDdXN0b21GaWx0ZXJzLCBoZWFkZXJzV2l0aG91dEN1c3RvbUZpbHRlcnMsIGN1c3RvbUZpbHRlcikgewogIHNlYXJjaCA9IHR5cGVvZiBzZWFyY2ggPT09ICdzdHJpbmcnID8gc2VhcmNoLnRyaW0oKSA6IG51bGw7CiAgcmV0dXJuIGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgLy8gSGVhZGVycyB3aXRoIGN1c3RvbSBmaWx0ZXJzIGFyZSBldmFsdWF0ZWQgd2hldGhlciBvciBub3QgYSBzZWFyY2ggdGVybSBoYXMgYmVlbiBwcm92aWRlZC4KICAgIC8vIFdlIG5lZWQgdG8gbWF0Y2ggZXZlcnkgZmlsdGVyIHRvIGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRzLgogICAgdmFyIG1hdGNoZXNDb2x1bW5GaWx0ZXJzID0gaGVhZGVyc1dpdGhDdXN0b21GaWx0ZXJzLmV2ZXJ5KGZpbHRlckZuKGl0ZW0sIHNlYXJjaCwgZGVmYXVsdEZpbHRlcikpOyAvLyBIZWFkZXJzIHdpdGhvdXQgY3VzdG9tIGZpbHRlcnMgYXJlIG9ubHkgZmlsdGVyZWQgYnkgdGhlIGBzZWFyY2hgIHByb3BlcnR5IGlmIGl0IGlzIGRlZmluZWQuCiAgICAvLyBXZSBvbmx5IG5lZWQgYSBzaW5nbGUgY29sdW1uIHRvIG1hdGNoIHRoZSBzZWFyY2ggdGVybSB0byBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0cy4KCiAgICB2YXIgbWF0Y2hlc1NlYXJjaFRlcm0gPSAhc2VhcmNoIHx8IGhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVycy5zb21lKGZpbHRlckZuKGl0ZW0sIHNlYXJjaCwgY3VzdG9tRmlsdGVyKSk7CiAgICByZXR1cm4gbWF0Y2hlc0NvbHVtbkZpbHRlcnMgJiYgbWF0Y2hlc1NlYXJjaFRlcm07CiAgfSk7Cn0KLyogQHZ1ZS9jb21wb25lbnQgKi8KCmV4cG9ydCBkZWZhdWx0IG1peGlucyhWRGF0YUl0ZXJhdG9yLCBMb2FkYWJsZSkuZXh0ZW5kKHsKICBuYW1lOiAndi1kYXRhLXRhYmxlJywKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlL2lzc3Vlcy82ODcyCiAgZGlyZWN0aXZlczogewogICAgcmlwcGxlOiByaXBwbGUKICB9LAogIHByb3BzOiB7CiAgICBoZWFkZXJzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBzaG93U2VsZWN0OiBCb29sZWFuLAogICAgY2hlY2tib3hDb2xvcjogU3RyaW5nLAogICAgc2hvd0V4cGFuZDogQm9vbGVhbiwKICAgIHNob3dHcm91cEJ5OiBCb29sZWFuLAogICAgLy8gVE9ETzogRml4CiAgICAvLyB2aXJ0dWFsUm93czogQm9vbGVhbiwKICAgIGhlaWdodDogW051bWJlciwgU3RyaW5nXSwKICAgIGhpZGVEZWZhdWx0SGVhZGVyOiBCb29sZWFuLAogICAgY2FwdGlvbjogU3RyaW5nLAogICAgZGVuc2U6IEJvb2xlYW4sCiAgICBoZWFkZXJQcm9wczogT2JqZWN0LAogICAgY2FsY3VsYXRlV2lkdGhzOiBCb29sZWFuLAogICAgZml4ZWRIZWFkZXI6IEJvb2xlYW4sCiAgICBoZWFkZXJzTGVuZ3RoOiBOdW1iZXIsCiAgICBleHBhbmRJY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJyRleHBhbmQnCiAgICB9LAogICAgY3VzdG9tRmlsdGVyOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBkZWZhdWx0RmlsdGVyCiAgICB9LAogICAgaXRlbUNsYXNzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9LAogICAgbG9hZGVySGVpZ2h0OiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDQKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbnRlcm5hbEdyb3VwQnk6IFtdLAogICAgICBvcGVuQ2FjaGU6IHt9LAogICAgICB3aWR0aHM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbXB1dGVkSGVhZGVyczogZnVuY3Rpb24gY29tcHV0ZWRIZWFkZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIXRoaXMuaGVhZGVycykgcmV0dXJuIFtdOwogICAgICB2YXIgaGVhZGVycyA9IHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGgpIHsKICAgICAgICByZXR1cm4gaC52YWx1ZSA9PT0gdW5kZWZpbmVkIHx8ICFfdGhpcy5pbnRlcm5hbEdyb3VwQnkuZmluZChmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIHYgPT09IGgudmFsdWU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgZGVmYXVsdEhlYWRlciA9IHsKICAgICAgICB0ZXh0OiAnJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgd2lkdGg6ICcxcHgnCiAgICAgIH07CiAgICAgIGlmICh0aGlzLnNob3dTZWxlY3QpIHsKICAgICAgICB2YXIgaW5kZXggPSBoZWFkZXJzLmZpbmRJbmRleChmdW5jdGlvbiAoaCkgewogICAgICAgICAgcmV0dXJuIGgudmFsdWUgPT09ICdkYXRhLXRhYmxlLXNlbGVjdCc7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGluZGV4IDwgMCkgaGVhZGVycy51bnNoaWZ0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEhlYWRlciksIHt9LCB7CiAgICAgICAgICB2YWx1ZTogJ2RhdGEtdGFibGUtc2VsZWN0JwogICAgICAgIH0pKTtlbHNlIGhlYWRlcnMuc3BsaWNlKGluZGV4LCAxLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRIZWFkZXIpLCBoZWFkZXJzW2luZGV4XSkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNob3dFeHBhbmQpIHsKICAgICAgICB2YXIgX2luZGV4ID0gaGVhZGVycy5maW5kSW5kZXgoZnVuY3Rpb24gKGgpIHsKICAgICAgICAgIHJldHVybiBoLnZhbHVlID09PSAnZGF0YS10YWJsZS1leHBhbmQnOwogICAgICAgIH0pOwogICAgICAgIGlmIChfaW5kZXggPCAwKSBoZWFkZXJzLnVuc2hpZnQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0SGVhZGVyKSwge30sIHsKICAgICAgICAgIHZhbHVlOiAnZGF0YS10YWJsZS1leHBhbmQnCiAgICAgICAgfSkpO2Vsc2UgaGVhZGVycy5zcGxpY2UoX2luZGV4LCAxLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRIZWFkZXIpLCBoZWFkZXJzW19pbmRleF0pKTsKICAgICAgfQogICAgICByZXR1cm4gaGVhZGVyczsKICAgIH0sCiAgICBjb2xzcGFuQXR0cnM6IGZ1bmN0aW9uIGNvbHNwYW5BdHRycygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiB7CiAgICAgICAgY29sc3BhbjogdGhpcy5oZWFkZXJzTGVuZ3RoIHx8IHRoaXMuY29tcHV0ZWRIZWFkZXJzLmxlbmd0aAogICAgICB9OwogICAgfSwKICAgIGNvbHVtblNvcnRlcnM6IGZ1bmN0aW9uIGNvbHVtblNvcnRlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVkSGVhZGVycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaGVhZGVyKSB7CiAgICAgICAgaWYgKGhlYWRlci5zb3J0KSBhY2NbaGVhZGVyLnZhbHVlXSA9IGhlYWRlci5zb3J0OwogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIHt9KTsKICAgIH0sCiAgICBoZWFkZXJzV2l0aEN1c3RvbUZpbHRlcnM6IGZ1bmN0aW9uIGhlYWRlcnNXaXRoQ3VzdG9tRmlsdGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiBoZWFkZXIuZmlsdGVyICYmICghaGVhZGVyLmhhc093blByb3BlcnR5KCdmaWx0ZXJhYmxlJykgfHwgaGVhZGVyLmZpbHRlcmFibGUgPT09IHRydWUpOwogICAgICB9KTsKICAgIH0sCiAgICBoZWFkZXJzV2l0aG91dEN1c3RvbUZpbHRlcnM6IGZ1bmN0aW9uIGhlYWRlcnNXaXRob3V0Q3VzdG9tRmlsdGVycygpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiAhaGVhZGVyLmZpbHRlciAmJiAoIWhlYWRlci5oYXNPd25Qcm9wZXJ0eSgnZmlsdGVyYWJsZScpIHx8IGhlYWRlci5maWx0ZXJhYmxlID09PSB0cnVlKTsKICAgICAgfSk7CiAgICB9LAogICAgc2FuaXRpemVkSGVhZGVyUHJvcHM6IGZ1bmN0aW9uIHNhbml0aXplZEhlYWRlclByb3BzKCkgewogICAgICByZXR1cm4gY2FtZWxpemVPYmplY3RLZXlzKHRoaXMuaGVhZGVyUHJvcHMpOwogICAgfSwKICAgIGNvbXB1dGVkSXRlbXNQZXJQYWdlOiBmdW5jdGlvbiBjb21wdXRlZEl0ZW1zUGVyUGFnZSgpIHsKICAgICAgdmFyIGl0ZW1zUGVyUGFnZSA9IHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuaXRlbXNQZXJQYWdlID8gdGhpcy5vcHRpb25zLml0ZW1zUGVyUGFnZSA6IHRoaXMuaXRlbXNQZXJQYWdlOwogICAgICB2YXIgaXRlbXNQZXJQYWdlT3B0aW9ucyA9IHRoaXMuc2FuaXRpemVkRm9vdGVyUHJvcHMuaXRlbXNQZXJQYWdlT3B0aW9uczsKICAgICAgaWYgKGl0ZW1zUGVyUGFnZU9wdGlvbnMgJiYgIWl0ZW1zUGVyUGFnZU9wdGlvbnMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ251bWJlcicgPyBpdGVtID09PSBpdGVtc1BlclBhZ2UgOiBpdGVtLnZhbHVlID09PSBpdGVtc1BlclBhZ2U7CiAgICAgIH0pKSB7CiAgICAgICAgdmFyIGZpcnN0T3B0aW9uID0gaXRlbXNQZXJQYWdlT3B0aW9uc1swXTsKICAgICAgICByZXR1cm4gX3R5cGVvZihmaXJzdE9wdGlvbikgPT09ICdvYmplY3QnID8gZmlyc3RPcHRpb24udmFsdWUgOiBmaXJzdE9wdGlvbjsKICAgICAgfQogICAgICByZXR1cm4gaXRlbXNQZXJQYWdlOwogICAgfSwKICAgIGdyb3VwQnlUZXh0OiBmdW5jdGlvbiBncm91cEJ5VGV4dCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBfYSwgX2IsIF9jOwogICAgICByZXR1cm4gKF9jID0gKF9iID0gKF9hID0gdGhpcy5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluZChmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICAgICAgdmFyIF9hOwogICAgICAgIHJldHVybiBoZWFkZXIudmFsdWUgPT09ICgoX2EgPSBfdGhpczIuaW50ZXJuYWxHcm91cEJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0pOwogICAgICB9KSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRleHQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICcnOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgdmFyIGJyZWFraW5nUHJvcHMgPSBbWydzb3J0LWljb24nLCAnaGVhZGVyLXByb3BzLnNvcnQtaWNvbiddLCBbJ2hpZGUtaGVhZGVycycsICdoaWRlLWRlZmF1bHQtaGVhZGVyJ10sIFsnc2VsZWN0LWFsbCcsICdzaG93LXNlbGVjdCddXTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgYnJlYWtpbmdQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgIG9yaWdpbmFsID0gX3JlZjJbMF0sCiAgICAgICAgcmVwbGFjZW1lbnQgPSBfcmVmMlsxXTsKICAgICAgaWYgKF90aGlzMy4kYXR0cnMuaGFzT3duUHJvcGVydHkob3JpZ2luYWwpKSBicmVha2luZyhvcmlnaW5hbCwgcmVwbGFjZW1lbnQsIF90aGlzMyk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBpZiAoKCF0aGlzLnNvcnRCeSB8fCAhdGhpcy5zb3J0QnkubGVuZ3RoKSAmJiAoIXRoaXMub3B0aW9ucy5zb3J0QnkgfHwgIXRoaXMub3B0aW9ucy5zb3J0QnkubGVuZ3RoKSkgewogICAgLy8gICBjb25zdCBmaXJzdFNvcnRhYmxlID0gdGhpcy5oZWFkZXJzLmZpbmQoaCA9PiAhKCdzb3J0YWJsZScgaW4gaCkgfHwgISFoLnNvcnRhYmxlKQogICAgLy8gICBpZiAoZmlyc3RTb3J0YWJsZSkgdGhpcy51cGRhdGVPcHRpb25zKHsgc29ydEJ5OiBbZmlyc3RTb3J0YWJsZS52YWx1ZV0sIHNvcnREZXNjOiBbZmFsc2VdIH0pCiAgICAvLyB9CiAgICBpZiAodGhpcy5jYWxjdWxhdGVXaWR0aHMpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuY2FsY1dpZHRocyk7CiAgICAgIHRoaXMuY2FsY1dpZHRocygpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICh0aGlzLmNhbGN1bGF0ZVdpZHRocykgewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5jYWxjV2lkdGhzKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbGNXaWR0aHM6IGZ1bmN0aW9uIGNhbGNXaWR0aHMoKSB7CiAgICAgIHRoaXMud2lkdGhzID0gQXJyYXkuZnJvbSh0aGlzLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpKS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5jbGllbnRXaWR0aDsKICAgICAgfSk7CiAgICB9LAogICAgY3VzdG9tRmlsdGVyV2l0aENvbHVtbnM6IGZ1bmN0aW9uIGN1c3RvbUZpbHRlcldpdGhDb2x1bW5zKGl0ZW1zLCBzZWFyY2gpIHsKICAgICAgcmV0dXJuIHNlYXJjaFRhYmxlSXRlbXMoaXRlbXMsIHNlYXJjaCwgdGhpcy5oZWFkZXJzV2l0aEN1c3RvbUZpbHRlcnMsIHRoaXMuaGVhZGVyc1dpdGhvdXRDdXN0b21GaWx0ZXJzLCB0aGlzLmN1c3RvbUZpbHRlcik7CiAgICB9LAogICAgY3VzdG9tU29ydFdpdGhIZWFkZXJzOiBmdW5jdGlvbiBjdXN0b21Tb3J0V2l0aEhlYWRlcnMoaXRlbXMsIHNvcnRCeSwgc29ydERlc2MsIGxvY2FsZSkgewogICAgICByZXR1cm4gdGhpcy5jdXN0b21Tb3J0KGl0ZW1zLCBzb3J0QnksIHNvcnREZXNjLCBsb2NhbGUsIHRoaXMuY29sdW1uU29ydGVycyk7CiAgICB9LAogICAgY3JlYXRlSXRlbVByb3BzOiBmdW5jdGlvbiBjcmVhdGVJdGVtUHJvcHMoaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIHByb3BzID0gVkRhdGFJdGVyYXRvci5vcHRpb25zLm1ldGhvZHMuY3JlYXRlSXRlbVByb3BzLmNhbGwodGhpcywgaXRlbSwgaW5kZXgpOwogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wcywgewogICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzCiAgICAgIH0pOwogICAgfSwKICAgIGdlbkNhcHRpb246IGZ1bmN0aW9uIGdlbkNhcHRpb24ocHJvcHMpIHsKICAgICAgaWYgKHRoaXMuY2FwdGlvbikgcmV0dXJuIFt0aGlzLiRjcmVhdGVFbGVtZW50KCdjYXB0aW9uJywgW3RoaXMuY2FwdGlvbl0pXTsKICAgICAgcmV0dXJuIGdldFNsb3QodGhpcywgJ2NhcHRpb24nLCBwcm9wcywgdHJ1ZSk7CiAgICB9LAogICAgZ2VuQ29sZ3JvdXA6IGZ1bmN0aW9uIGdlbkNvbGdyb3VwKHByb3BzKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgnY29sZ3JvdXAnLCB0aGlzLmNvbXB1dGVkSGVhZGVycy5tYXAoZnVuY3Rpb24gKGhlYWRlcikgewogICAgICAgIHJldHVybiBfdGhpczQuJGNyZWF0ZUVsZW1lbnQoJ2NvbCcsIHsKICAgICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAgIGRpdmlkZXI6IGhlYWRlci5kaXZpZGVyCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pKTsKICAgIH0sCiAgICBnZW5Mb2FkaW5nOiBmdW5jdGlvbiBnZW5Mb2FkaW5nKCkgewogICAgICB2YXIgdGggPSB0aGlzLiRjcmVhdGVFbGVtZW50KCd0aCcsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2NvbHVtbicsCiAgICAgICAgYXR0cnM6IHRoaXMuY29sc3BhbkF0dHJzCiAgICAgIH0sIFt0aGlzLmdlblByb2dyZXNzKCldKTsKICAgICAgdmFyIHRyID0gdGhpcy4kY3JlYXRlRWxlbWVudCgndHInLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX3Byb2dyZXNzJwogICAgICB9LCBbdGhdKTsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RoZWFkJywgW3RyXSk7CiAgICB9LAogICAgZ2VuSGVhZGVyczogZnVuY3Rpb24gZ2VuSGVhZGVycyhwcm9wcykgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnNhbml0aXplZEhlYWRlclByb3BzKSwge30sIHsKICAgICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzLAogICAgICAgICAgb3B0aW9uczogcHJvcHMub3B0aW9ucywKICAgICAgICAgIG1vYmlsZTogdGhpcy5pc01vYmlsZSwKICAgICAgICAgIHNob3dHcm91cEJ5OiB0aGlzLnNob3dHcm91cEJ5LAogICAgICAgICAgY2hlY2tib3hDb2xvcjogdGhpcy5jaGVja2JveENvbG9yLAogICAgICAgICAgc29tZUl0ZW1zOiB0aGlzLnNvbWVJdGVtcywKICAgICAgICAgIGV2ZXJ5SXRlbTogdGhpcy5ldmVyeUl0ZW0sCiAgICAgICAgICBzaW5nbGVTZWxlY3Q6IHRoaXMuc2luZ2xlU2VsZWN0LAogICAgICAgICAgZGlzYWJsZVNvcnQ6IHRoaXMuZGlzYWJsZVNvcnQKICAgICAgICB9KSwKICAgICAgICBvbjogewogICAgICAgICAgc29ydDogcHJvcHMuc29ydCwKICAgICAgICAgIGdyb3VwOiBwcm9wcy5ncm91cCwKICAgICAgICAgICd0b2dnbGUtc2VsZWN0LWFsbCc6IHRoaXMudG9nZ2xlU2VsZWN0QWxsCiAgICAgICAgfQogICAgICB9OyAvLyBUT0RPOiByZW5hbWUgdG8gJ2hlYWQnPyAodGhlYWQsIHRib2R5LCB0Zm9vdCkKCiAgICAgIHZhciBjaGlsZHJlbiA9IFtnZXRTbG90KHRoaXMsICdoZWFkZXInLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwgewogICAgICAgIGlzTW9iaWxlOiB0aGlzLmlzTW9iaWxlCiAgICAgIH0pKV07CiAgICAgIGlmICghdGhpcy5oaWRlRGVmYXVsdEhlYWRlcikgewogICAgICAgIHZhciBzY29wZWRTbG90cyA9IGdldFByZWZpeGVkU2NvcGVkU2xvdHMoJ2hlYWRlci4nLCB0aGlzLiRzY29wZWRTbG90cyk7CiAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLiRjcmVhdGVFbGVtZW50KFZEYXRhVGFibGVIZWFkZXIsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7CiAgICAgICAgICBzY29wZWRTbG90czogc2NvcGVkU2xvdHMKICAgICAgICB9KSkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmxvYWRpbmcpIGNoaWxkcmVuLnB1c2godGhpcy5nZW5Mb2FkaW5nKCkpOwogICAgICByZXR1cm4gY2hpbGRyZW47CiAgICB9LAogICAgZ2VuRW1wdHlXcmFwcGVyOiBmdW5jdGlvbiBnZW5FbXB0eVdyYXBwZXIoY29udGVudCkgewogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndHInLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2VtcHR5LXdyYXBwZXInCiAgICAgIH0sIFt0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZCcsIHsKICAgICAgICBhdHRyczogdGhpcy5jb2xzcGFuQXR0cnMKICAgICAgfSwgY29udGVudCldKTsKICAgIH0sCiAgICBnZW5JdGVtczogZnVuY3Rpb24gZ2VuSXRlbXMoaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBlbXB0eSA9IHRoaXMuZ2VuRW1wdHkocHJvcHMub3JpZ2luYWxJdGVtc0xlbmd0aCwgcHJvcHMucGFnaW5hdGlvbi5pdGVtc0xlbmd0aCk7CiAgICAgIGlmIChlbXB0eSkgcmV0dXJuIFtlbXB0eV07CiAgICAgIHJldHVybiBwcm9wcy5ncm91cGVkSXRlbXMgPyB0aGlzLmdlbkdyb3VwZWRSb3dzKHByb3BzLmdyb3VwZWRJdGVtcywgcHJvcHMpIDogdGhpcy5nZW5Sb3dzKGl0ZW1zLCBwcm9wcyk7CiAgICB9LAogICAgZ2VuR3JvdXBlZFJvd3M6IGZ1bmN0aW9uIGdlbkdyb3VwZWRSb3dzKGdyb3VwZWRJdGVtcywgcHJvcHMpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHJldHVybiBncm91cGVkSXRlbXMubWFwKGZ1bmN0aW9uIChncm91cCkgewogICAgICAgIGlmICghX3RoaXM1Lm9wZW5DYWNoZS5oYXNPd25Qcm9wZXJ0eShncm91cC5uYW1lKSkgX3RoaXM1LiRzZXQoX3RoaXM1Lm9wZW5DYWNoZSwgZ3JvdXAubmFtZSwgdHJ1ZSk7CiAgICAgICAgaWYgKF90aGlzNS4kc2NvcGVkU2xvdHMuZ3JvdXApIHsKICAgICAgICAgIHJldHVybiBfdGhpczUuJHNjb3BlZFNsb3RzLmdyb3VwKHsKICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLm5hbWUsCiAgICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMsCiAgICAgICAgICAgIGlzTW9iaWxlOiBfdGhpczUuaXNNb2JpbGUsCiAgICAgICAgICAgIGl0ZW1zOiBncm91cC5pdGVtcywKICAgICAgICAgICAgaGVhZGVyczogX3RoaXM1LmNvbXB1dGVkSGVhZGVycwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBfdGhpczUuZ2VuRGVmYXVsdEdyb3VwZWRSb3coZ3JvdXAubmFtZSwgZ3JvdXAuaXRlbXMsIHByb3BzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRHcm91cGVkUm93OiBmdW5jdGlvbiBnZW5EZWZhdWx0R3JvdXBlZFJvdyhncm91cCwgaXRlbXMsIHByb3BzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgaXNPcGVuID0gISF0aGlzLm9wZW5DYWNoZVtncm91cF07CiAgICAgIHZhciBjaGlsZHJlbiA9IFt0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsKICAgICAgICBzbG90OiAncm93LmNvbnRlbnQnCiAgICAgIH0sIHRoaXMuZ2VuUm93cyhpdGVtcywgcHJvcHMpKV07CiAgICAgIHZhciB0b2dnbGVGbiA9IGZ1bmN0aW9uIHRvZ2dsZUZuKCkgewogICAgICAgIHJldHVybiBfdGhpczYuJHNldChfdGhpczYub3BlbkNhY2hlLCBncm91cCwgIV90aGlzNi5vcGVuQ2FjaGVbZ3JvdXBdKTsKICAgICAgfTsKICAgICAgdmFyIHJlbW92ZUZuID0gZnVuY3Rpb24gcmVtb3ZlRm4oKSB7CiAgICAgICAgcmV0dXJuIHByb3BzLnVwZGF0ZU9wdGlvbnMoewogICAgICAgICAgZ3JvdXBCeTogW10sCiAgICAgICAgICBncm91cERlc2M6IFtdCiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIGlmICh0aGlzLiRzY29wZWRTbG90c1snZ3JvdXAuaGVhZGVyJ10pIHsKICAgICAgICBjaGlsZHJlbi51bnNoaWZ0KHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJywgewogICAgICAgICAgc2xvdDogJ2NvbHVtbi5oZWFkZXInCiAgICAgICAgfSwgW3RoaXMuJHNjb3BlZFNsb3RzWydncm91cC5oZWFkZXInXSh7CiAgICAgICAgICBncm91cDogZ3JvdXAsCiAgICAgICAgICBncm91cEJ5OiBwcm9wcy5vcHRpb25zLmdyb3VwQnksCiAgICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSwKICAgICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzLAogICAgICAgICAgaXNPcGVuOiBpc09wZW4sCiAgICAgICAgICB0b2dnbGU6IHRvZ2dsZUZuLAogICAgICAgICAgcmVtb3ZlOiByZW1vdmVGbgogICAgICAgIH0pXSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB0b2dnbGUgPSB0aGlzLiRjcmVhdGVFbGVtZW50KFZCdG4sIHsKICAgICAgICAgIHN0YXRpY0NsYXNzOiAnbWEtMCcsCiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICBpY29uOiB0cnVlLAogICAgICAgICAgICBzbWFsbDogdHJ1ZQogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNsaWNrOiB0b2dnbGVGbgogICAgICAgICAgfQogICAgICAgIH0sIFt0aGlzLiRjcmVhdGVFbGVtZW50KFZJY29uLCBbaXNPcGVuID8gJyRtaW51cycgOiAnJHBsdXMnXSldKTsKICAgICAgICB2YXIgcmVtb3ZlID0gdGhpcy4kY3JlYXRlRWxlbWVudChWQnRuLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ21hLTAnLAogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgaWNvbjogdHJ1ZSwKICAgICAgICAgICAgc21hbGw6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjbGljazogcmVtb3ZlRm4KICAgICAgICAgIH0KICAgICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudChWSWNvbiwgWyckY2xvc2UnXSldKTsKICAgICAgICB2YXIgY29sdW1uID0gdGhpcy4kY3JlYXRlRWxlbWVudCgndGQnLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ3RleHQtc3RhcnQnLAogICAgICAgICAgYXR0cnM6IHRoaXMuY29sc3BhbkF0dHJzCiAgICAgICAgfSwgW3RvZ2dsZSwgIiIuY29uY2F0KHRoaXMuZ3JvdXBCeVRleHQsICI6ICIpLmNvbmNhdChncm91cCksIHJlbW92ZV0pOwogICAgICAgIGNoaWxkcmVuLnVuc2hpZnQodGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgICBzbG90OiAnY29sdW1uLmhlYWRlcicKICAgICAgICB9LCBbY29sdW1uXSkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLiRzY29wZWRTbG90c1snZ3JvdXAuc3VtbWFyeSddKSB7CiAgICAgICAgY2hpbGRyZW4ucHVzaCh0aGlzLiRjcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScsIHsKICAgICAgICAgIHNsb3Q6ICdjb2x1bW4uc3VtbWFyeScKICAgICAgICB9LCBbdGhpcy4kc2NvcGVkU2xvdHNbJ2dyb3VwLnN1bW1hcnknXSh7CiAgICAgICAgICBncm91cDogZ3JvdXAsCiAgICAgICAgICBncm91cEJ5OiBwcm9wcy5vcHRpb25zLmdyb3VwQnksCiAgICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSwKICAgICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzLAogICAgICAgICAgaXNPcGVuOiBpc09wZW4sCiAgICAgICAgICB0b2dnbGU6IHRvZ2dsZUZuCiAgICAgICAgfSldKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoUm93R3JvdXAsIHsKICAgICAgICBrZXk6IGdyb3VwLAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICB2YWx1ZTogaXNPcGVuCiAgICAgICAgfQogICAgICB9LCBjaGlsZHJlbik7CiAgICB9LAogICAgZ2VuUm93czogZnVuY3Rpb24gZ2VuUm93cyhpdGVtcywgcHJvcHMpIHsKICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzLml0ZW0gPyB0aGlzLmdlblNjb3BlZFJvd3MoaXRlbXMsIHByb3BzKSA6IHRoaXMuZ2VuRGVmYXVsdFJvd3MoaXRlbXMsIHByb3BzKTsKICAgIH0sCiAgICBnZW5TY29wZWRSb3dzOiBmdW5jdGlvbiBnZW5TY29wZWRSb3dzKGl0ZW1zLCBwcm9wcykgewogICAgICB2YXIgcm93cyA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICByb3dzLnB1c2godGhpcy4kc2NvcGVkU2xvdHMuaXRlbShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuY3JlYXRlSXRlbVByb3BzKGl0ZW0sIGkpKSwge30sIHsKICAgICAgICAgIGlzTW9iaWxlOiB0aGlzLmlzTW9iaWxlCiAgICAgICAgfSkpKTsKICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKGl0ZW0pKSB7CiAgICAgICAgICByb3dzLnB1c2godGhpcy4kc2NvcGVkU2xvdHNbJ2V4cGFuZGVkLWl0ZW0nXSh7CiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzLAogICAgICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSwKICAgICAgICAgICAgaW5kZXg6IGksCiAgICAgICAgICAgIGl0ZW06IGl0ZW0KICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJvd3M7CiAgICB9LAogICAgZ2VuRGVmYXVsdFJvd3M6IGZ1bmN0aW9uIGdlbkRlZmF1bHRSb3dzKGl0ZW1zLCBwcm9wcykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzWydleHBhbmRlZC1pdGVtJ10gPyBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIF90aGlzNy5nZW5EZWZhdWx0RXhwYW5kZWRSb3coaXRlbSwgaW5kZXgpOwogICAgICB9KSA6IGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gX3RoaXM3LmdlbkRlZmF1bHRTaW1wbGVSb3coaXRlbSwgaW5kZXgpOwogICAgICB9KTsKICAgIH0sCiAgICBnZW5EZWZhdWx0RXhwYW5kZWRSb3c6IGZ1bmN0aW9uIGdlbkRlZmF1bHRFeHBhbmRlZFJvdyhpdGVtLCBpbmRleCkgewogICAgICB2YXIgaXNFeHBhbmRlZCA9IHRoaXMuaXNFeHBhbmRlZChpdGVtKTsKICAgICAgdmFyIGNsYXNzZXMgPSB7CiAgICAgICAgJ3YtZGF0YS10YWJsZV9fZXhwYW5kZWQgdi1kYXRhLXRhYmxlX19leHBhbmRlZF9fcm93JzogaXNFeHBhbmRlZAogICAgICB9OwogICAgICB2YXIgaGVhZGVyUm93ID0gdGhpcy5nZW5EZWZhdWx0U2ltcGxlUm93KGl0ZW0sIGluZGV4LCBjbGFzc2VzKTsKICAgICAgdmFyIGV4cGFuZGVkUm93ID0gdGhpcy4kY3JlYXRlRWxlbWVudCgndHInLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWRhdGEtdGFibGVfX2V4cGFuZGVkIHYtZGF0YS10YWJsZV9fZXhwYW5kZWRfX2NvbnRlbnQnCiAgICAgIH0sIFt0aGlzLiRzY29wZWRTbG90c1snZXhwYW5kZWQtaXRlbSddKHsKICAgICAgICBoZWFkZXJzOiB0aGlzLmNvbXB1dGVkSGVhZGVycywKICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZSwKICAgICAgICBpdGVtOiBpdGVtCiAgICAgIH0pXSk7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFJvd0dyb3VwLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHZhbHVlOiBpc0V4cGFuZGVkCiAgICAgICAgfQogICAgICB9LCBbdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5oZWFkZXInCiAgICAgIH0sIFtoZWFkZXJSb3ddKSwgdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogJ3Jvdy5jb250ZW50JwogICAgICB9LCBbZXhwYW5kZWRSb3ddKV0pOwogICAgfSwKICAgIGdlbkRlZmF1bHRTaW1wbGVSb3c6IGZ1bmN0aW9uIGdlbkRlZmF1bHRTaW1wbGVSb3coaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHZhciBjbGFzc2VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgICAgdmFyIHNjb3BlZFNsb3RzID0gZ2V0UHJlZml4ZWRTY29wZWRTbG90cygnaXRlbS4nLCB0aGlzLiRzY29wZWRTbG90cyk7CiAgICAgIHZhciBkYXRhID0gdGhpcy5jcmVhdGVJdGVtUHJvcHMoaXRlbSwgaW5kZXgpOwogICAgICBpZiAodGhpcy5zaG93U2VsZWN0KSB7CiAgICAgICAgdmFyIHNsb3QgPSBzY29wZWRTbG90c1snZGF0YS10YWJsZS1zZWxlY3QnXTsKICAgICAgICBzY29wZWRTbG90c1snZGF0YS10YWJsZS1zZWxlY3QnXSA9IHNsb3QgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gc2xvdChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwgewogICAgICAgICAgICBpc01vYmlsZTogX3RoaXM4LmlzTW9iaWxlCiAgICAgICAgICB9KSk7CiAgICAgICAgfSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfYTsKICAgICAgICAgIHJldHVybiBfdGhpczguJGNyZWF0ZUVsZW1lbnQoVlNpbXBsZUNoZWNrYm94LCB7CiAgICAgICAgICAgIHN0YXRpY0NsYXNzOiAndi1kYXRhLXRhYmxlX19jaGVja2JveCcsCiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdmFsdWU6IGRhdGEuaXNTZWxlY3RlZCwKICAgICAgICAgICAgICBkaXNhYmxlZDogIV90aGlzOC5pc1NlbGVjdGFibGUoaXRlbSksCiAgICAgICAgICAgICAgY29sb3I6IChfYSA9IF90aGlzOC5jaGVja2JveENvbG9yKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLnNlbGVjdCh2YWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgfQogICAgICBpZiAodGhpcy5zaG93RXhwYW5kKSB7CiAgICAgICAgdmFyIF9zbG90ID0gc2NvcGVkU2xvdHNbJ2RhdGEtdGFibGUtZXhwYW5kJ107CiAgICAgICAgc2NvcGVkU2xvdHNbJ2RhdGEtdGFibGUtZXhwYW5kJ10gPSBfc2xvdCA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfc2xvdChkYXRhKTsKICAgICAgICB9IDogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzOC4kY3JlYXRlRWxlbWVudChWSWNvbiwgewogICAgICAgICAgICBzdGF0aWNDbGFzczogJ3YtZGF0YS10YWJsZV9fZXhwYW5kLWljb24nLAogICAgICAgICAgICBjbGFzczogewogICAgICAgICAgICAgICd2LWRhdGEtdGFibGVfX2V4cGFuZC1pY29uLS1hY3RpdmUnOiBkYXRhLmlzRXhwYW5kZWQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soZSkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGRhdGEuZXhwYW5kKCFkYXRhLmlzRXhwYW5kZWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgW190aGlzOC5leHBhbmRJY29uXSk7CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCh0aGlzLmlzTW9iaWxlID8gTW9iaWxlUm93IDogUm93LCB7CiAgICAgICAga2V5OiBnZXRPYmplY3RWYWx1ZUJ5UGF0aChpdGVtLCB0aGlzLml0ZW1LZXkpLAogICAgICAgIGNsYXNzOiBtZXJnZUNsYXNzZXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjbGFzc2VzKSwge30sIHsKICAgICAgICAgICd2LWRhdGEtdGFibGVfX3NlbGVjdGVkJzogZGF0YS5pc1NlbGVjdGVkCiAgICAgICAgfSksIGdldFByb3BlcnR5RnJvbUl0ZW0oaXRlbSwgdGhpcy5pdGVtQ2xhc3MpKSwKICAgICAgICBwcm9wczogewogICAgICAgICAgaGVhZGVyczogdGhpcy5jb21wdXRlZEhlYWRlcnMsCiAgICAgICAgICBoaWRlRGVmYXVsdEhlYWRlcjogdGhpcy5oaWRlRGVmYXVsdEhlYWRlciwKICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgIGl0ZW06IGl0ZW0sCiAgICAgICAgICBydGw6IHRoaXMuJHZ1ZXRpZnkucnRsCiAgICAgICAgfSwKICAgICAgICBzY29wZWRTbG90czogc2NvcGVkU2xvdHMsCiAgICAgICAgb246IHsKICAgICAgICAgIC8vIFRPRE86IGZvciBjbGljaywgdGhlIGZpcnN0IGFyZ3VtZW50IHNob3VsZCBiZSB0aGUgZXZlbnQsIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IHNob3VsZCBiZSBkYXRhLAogICAgICAgICAgLy8gYnV0IHRoaXMgaXMgYSBicmVha2luZyBjaGFuZ2Ugc28gaXQncyBmb3IgdjMKICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOC4kZW1pdCgnY2xpY2s6cm93JywgaXRlbSwgZGF0YSk7CiAgICAgICAgICB9LAogICAgICAgICAgY29udGV4dG1lbnU6IGZ1bmN0aW9uIGNvbnRleHRtZW51KGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczguJGVtaXQoJ2NvbnRleHRtZW51OnJvdycsIGV2ZW50LCBkYXRhKTsKICAgICAgICAgIH0sCiAgICAgICAgICBkYmxjbGljazogZnVuY3Rpb24gZGJsY2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOC4kZW1pdCgnZGJsY2xpY2s6cm93JywgZXZlbnQsIGRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2VuQm9keTogZnVuY3Rpb24gZ2VuQm9keShwcm9wcykgewogICAgICB2YXIgZGF0YSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwgewogICAgICAgIGV4cGFuZDogdGhpcy5leHBhbmQsCiAgICAgICAgaGVhZGVyczogdGhpcy5jb21wdXRlZEhlYWRlcnMsCiAgICAgICAgaXNFeHBhbmRlZDogdGhpcy5pc0V4cGFuZGVkLAogICAgICAgIGlzTW9iaWxlOiB0aGlzLmlzTW9iaWxlLAogICAgICAgIGlzU2VsZWN0ZWQ6IHRoaXMuaXNTZWxlY3RlZCwKICAgICAgICBzZWxlY3Q6IHRoaXMuc2VsZWN0CiAgICAgIH0pOwogICAgICBpZiAodGhpcy4kc2NvcGVkU2xvdHMuYm9keSkgewogICAgICAgIHJldHVybiB0aGlzLiRzY29wZWRTbG90cy5ib2R5KGRhdGEpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCd0Ym9keScsIFtnZXRTbG90KHRoaXMsICdib2R5LnByZXBlbmQnLCBkYXRhLCB0cnVlKSwgdGhpcy5nZW5JdGVtcyhwcm9wcy5pdGVtcywgcHJvcHMpLCBnZXRTbG90KHRoaXMsICdib2R5LmFwcGVuZCcsIGRhdGEsIHRydWUpXSk7CiAgICB9LAogICAgZ2VuRm9vdDogZnVuY3Rpb24gZ2VuRm9vdChwcm9wcykgewogICAgICB2YXIgX2EsIF9iOwogICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy4kc2NvcGVkU2xvdHMpLmZvb3QpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCBwcm9wcyk7CiAgICB9LAogICAgZ2VuRm9vdGVyczogZnVuY3Rpb24gZ2VuRm9vdGVycyhwcm9wcykgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBvcHRpb25zOiBwcm9wcy5vcHRpb25zLAogICAgICAgICAgcGFnaW5hdGlvbjogcHJvcHMucGFnaW5hdGlvbiwKICAgICAgICAgIGl0ZW1zUGVyUGFnZVRleHQ6ICckdnVldGlmeS5kYXRhVGFibGUuaXRlbXNQZXJQYWdlVGV4dCcKICAgICAgICB9LCB0aGlzLnNhbml0aXplZEZvb3RlclByb3BzKSwKICAgICAgICBvbjogewogICAgICAgICAgJ3VwZGF0ZTpvcHRpb25zJzogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gcHJvcHMudXBkYXRlT3B0aW9ucyh2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB3aWR0aHM6IHRoaXMud2lkdGhzLAogICAgICAgIGhlYWRlcnM6IHRoaXMuY29tcHV0ZWRIZWFkZXJzCiAgICAgIH07CiAgICAgIHZhciBjaGlsZHJlbiA9IFtnZXRTbG90KHRoaXMsICdmb290ZXInLCBkYXRhLCB0cnVlKV07CiAgICAgIGlmICghdGhpcy5oaWRlRGVmYXVsdEZvb3RlcikgewogICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy4kY3JlYXRlRWxlbWVudChWRGF0YUZvb3RlciwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKSwge30sIHsKICAgICAgICAgIHNjb3BlZFNsb3RzOiBnZXRQcmVmaXhlZFNjb3BlZFNsb3RzKCdmb290ZXIuJywgdGhpcy4kc2NvcGVkU2xvdHMpCiAgICAgICAgfSkpKTsKICAgICAgfQogICAgICByZXR1cm4gY2hpbGRyZW47CiAgICB9LAogICAgZ2VuRGVmYXVsdFNjb3BlZFNsb3Q6IGZ1bmN0aW9uIGdlbkRlZmF1bHRTY29wZWRTbG90KHByb3BzKSB7CiAgICAgIHZhciBzaW1wbGVQcm9wcyA9IHsKICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LAogICAgICAgIGZpeGVkSGVhZGVyOiB0aGlzLmZpeGVkSGVhZGVyLAogICAgICAgIGRlbnNlOiB0aGlzLmRlbnNlCiAgICAgIH07IC8vIGlmICh0aGlzLnZpcnR1YWxSb3dzKSB7CiAgICAgIC8vICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoVlZpcnR1YWxUYWJsZSwgewogICAgICAvLyAgICAgcHJvcHM6IE9iamVjdC5hc3NpZ24oc2ltcGxlUHJvcHMsIHsKICAgICAgLy8gICAgICAgaXRlbXM6IHByb3BzLml0ZW1zLAogICAgICAvLyAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LAogICAgICAvLyAgICAgICByb3dIZWlnaHQ6IHRoaXMuZGVuc2UgPyAyNCA6IDQ4LAogICAgICAvLyAgICAgICBoZWFkZXJIZWlnaHQ6IHRoaXMuZGVuc2UgPyAzMiA6IDQ4LAogICAgICAvLyAgICAgICAvLyBUT0RPOiBleHBvc2UgcmVzdCBvZiBwcm9wcyBmcm9tIHZpcnR1YWwgdGFibGU/CiAgICAgIC8vICAgICB9KSwKICAgICAgLy8gICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgIC8vICAgICAgIGl0ZW1zOiAoeyBpdGVtcyB9KSA9PiB0aGlzLmdlbkl0ZW1zKGl0ZW1zLCBwcm9wcykgYXMgYW55LAogICAgICAvLyAgICAgfSwKICAgICAgLy8gICB9LCBbCiAgICAgIC8vICAgICB0aGlzLnByb3h5U2xvdCgnYm9keS5iZWZvcmUnLCBbdGhpcy5nZW5DYXB0aW9uKHByb3BzKSwgdGhpcy5nZW5IZWFkZXJzKHByb3BzKV0pLAogICAgICAvLyAgICAgdGhpcy5wcm94eVNsb3QoJ2JvdHRvbScsIHRoaXMuZ2VuRm9vdGVycyhwcm9wcykpLAogICAgICAvLyAgIF0pCiAgICAgIC8vIH0KCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFZTaW1wbGVUYWJsZSwgewogICAgICAgIHByb3BzOiBzaW1wbGVQcm9wcywKICAgICAgICBjbGFzczogewogICAgICAgICAgJ3YtZGF0YS10YWJsZS0tbW9iaWxlJzogdGhpcy5pc01vYmlsZQogICAgICAgIH0KICAgICAgfSwgW3RoaXMucHJveHlTbG90KCd0b3AnLCBnZXRTbG90KHRoaXMsICd0b3AnLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwge30sIHsKICAgICAgICBpc01vYmlsZTogdGhpcy5pc01vYmlsZQogICAgICB9KSwgdHJ1ZSkpLCB0aGlzLmdlbkNhcHRpb24ocHJvcHMpLCB0aGlzLmdlbkNvbGdyb3VwKHByb3BzKSwgdGhpcy5nZW5IZWFkZXJzKHByb3BzKSwgdGhpcy5nZW5Cb2R5KHByb3BzKSwgdGhpcy5nZW5Gb290KHByb3BzKSwgdGhpcy5wcm94eVNsb3QoJ2JvdHRvbScsIHRoaXMuZ2VuRm9vdGVycyhwcm9wcykpXSk7CiAgICB9LAogICAgcHJveHlTbG90OiBmdW5jdGlvbiBwcm94eVNsb3Qoc2xvdCwgY29udGVudCkgewogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnLCB7CiAgICAgICAgc2xvdDogc2xvdAogICAgICB9LCBjb250ZW50KTsKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgdmFyIF90aGlzOSA9IHRoaXM7CiAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChWRGF0YSwgewogICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLiRwcm9wcyksIHt9LCB7CiAgICAgICAgY3VzdG9tRmlsdGVyOiB0aGlzLmN1c3RvbUZpbHRlcldpdGhDb2x1bW5zLAogICAgICAgIGN1c3RvbVNvcnQ6IHRoaXMuY3VzdG9tU29ydFdpdGhIZWFkZXJzLAogICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5jb21wdXRlZEl0ZW1zUGVyUGFnZQogICAgICB9KSwKICAgICAgb246IHsKICAgICAgICAndXBkYXRlOm9wdGlvbnMnOiBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKHYsIG9sZCkgewogICAgICAgICAgX3RoaXM5LmludGVybmFsR3JvdXBCeSA9IHYuZ3JvdXBCeSB8fCBbXTsKICAgICAgICAgICFkZWVwRXF1YWwodiwgb2xkKSAmJiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTpvcHRpb25zJywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOnBhZ2UnOiBmdW5jdGlvbiB1cGRhdGVQYWdlKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTpwYWdlJywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOml0ZW1zLXBlci1wYWdlJzogZnVuY3Rpb24gdXBkYXRlSXRlbXNQZXJQYWdlKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTppdGVtcy1wZXItcGFnZScsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTpzb3J0LWJ5JzogZnVuY3Rpb24gdXBkYXRlU29ydEJ5KHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTpzb3J0LWJ5Jywgdik7CiAgICAgICAgfSwKICAgICAgICAndXBkYXRlOnNvcnQtZGVzYyc6IGZ1bmN0aW9uIHVwZGF0ZVNvcnREZXNjKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTpzb3J0LWRlc2MnLCB2KTsKICAgICAgICB9LAogICAgICAgICd1cGRhdGU6Z3JvdXAtYnknOiBmdW5jdGlvbiB1cGRhdGVHcm91cEJ5KHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTpncm91cC1ieScsIHYpOwogICAgICAgIH0sCiAgICAgICAgJ3VwZGF0ZTpncm91cC1kZXNjJzogZnVuY3Rpb24gdXBkYXRlR3JvdXBEZXNjKHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3VwZGF0ZTpncm91cC1kZXNjJywgdik7CiAgICAgICAgfSwKICAgICAgICBwYWdpbmF0aW9uOiBmdW5jdGlvbiBwYWdpbmF0aW9uKHYsIG9sZCkgewogICAgICAgICAgcmV0dXJuICFkZWVwRXF1YWwodiwgb2xkKSAmJiBfdGhpczkuJGVtaXQoJ3BhZ2luYXRpb24nLCB2KTsKICAgICAgICB9LAogICAgICAgICdjdXJyZW50LWl0ZW1zJzogZnVuY3Rpb24gY3VycmVudEl0ZW1zKHYpIHsKICAgICAgICAgIF90aGlzOS5pbnRlcm5hbEN1cnJlbnRJdGVtcyA9IHY7CiAgICAgICAgICBfdGhpczkuJGVtaXQoJ2N1cnJlbnQtaXRlbXMnLCB2KTsKICAgICAgICB9LAogICAgICAgICdwYWdlLWNvdW50JzogZnVuY3Rpb24gcGFnZUNvdW50KHYpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuJGVtaXQoJ3BhZ2UtY291bnQnLCB2KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgZGVmYXVsdDogdGhpcy5nZW5EZWZhdWx0U2NvcGVkU2xvdAogICAgICB9CiAgICB9KTsKICB9Cn0pOw=="},{"version":3,"mappings":"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","names":["VData","VDataFooter","VDataIterator","VBtn","VDataTableHeader","VIcon","Row","RowGroup","VSimpleCheckbox","VSimpleTable","MobileRow","Loadable","ripple","mixins","deepEqual","getObjectValueByPath","getPrefixedScopedSlots","getSlot","defaultFilter","camelizeObjectKeys","getPropertyFromItem","breaking","mergeClasses","filterFn","item","search","filter","value","header","searchTableItems","items","headersWithCustomFilters","headersWithoutCustomFilters","customFilter","trim","matchesColumnFilters","every","matchesSearchTerm","some","extend","name","directives","props","headers","type","Array","default","showSelect","Boolean","checkboxColor","String","showExpand","showGroupBy","height","Number","hideDefaultHeader","caption","dense","headerProps","Object","calculateWidths","fixedHeader","headersLength","expandIcon","Function","itemClass","loaderHeight","data","internalGroupBy","openCache","widths","computed","computedHeaders","h","undefined","find","v","defaultHeader","text","sortable","width","index","findIndex","unshift","splice","colspanAttrs","isMobile","colspan","length","columnSorters","reduce","acc","sort","hasOwnProperty","filterable","sanitizedHeaderProps","computedItemsPerPage","itemsPerPage","options","itemsPerPageOptions","sanitizedFooterProps","firstOption","groupByText","_a","_b","_c","created","breakingProps","forEach","original","replacement","$attrs","mounted","window","addEventListener","calcWidths","beforeDestroy","removeEventListener","methods","from","$el","querySelectorAll","map","e","clientWidth","customFilterWithColumns","customSortWithHeaders","sortBy","sortDesc","locale","customSort","createItemProps","call","assign","genCaption","$createElement","genColgroup","class","divider","genLoading","th","staticClass","attrs","genProgress","tr","genHeaders","mobile","someItems","everyItem","singleSelect","disableSort","on","group","toggleSelectAll","children","scopedSlots","$scopedSlots","push","loading","genEmptyWrapper","content","genItems","empty","genEmpty","originalItemsLength","pagination","itemsLength","groupedItems","genGroupedRows","genRows","$set","genDefaultGroupedRow","isOpen","slot","toggleFn","removeFn","updateOptions","groupBy","groupDesc","toggle","remove","icon","small","click","column","key","genScopedRows","genDefaultRows","rows","i","isExpanded","genDefaultExpandedRow","genDefaultSimpleRow","classes","headerRow","expandedRow","isSelected","disabled","isSelectable","color","input","select","val","stopPropagation","expand","itemKey","rtl","$vuetify","$emit","contextmenu","event","dblclick","genBody","body","genFoot","foot","genFooters","itemsPerPageText","hideDefaultFooter","genDefaultScopedSlot","simpleProps","proxySlot","render","$props","old","internalCurrentItems"],"sourceRoot":"","sources":["../../../src/components/VDataTable/VDataTable.ts"],"sourcesContent":["import './VDataTable.sass'\n\n// Types\nimport { VNode, VNodeChildrenArrayContents, VNodeChildren } from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport {\n  DataTableHeader,\n  DataTableFilterFunction,\n  DataScopeProps,\n  DataOptions,\n  DataPagination,\n  DataTableCompareFunction,\n  DataItemsPerPageOption,\n  ItemGroup,\n  RowClassFunction,\n  DataTableItemProps,\n} from 'vuetify/types'\n\n// Components\nimport { VData } from '../VData'\nimport { VDataFooter, VDataIterator } from '../VDataIterator'\nimport VBtn from '../VBtn'\nimport VDataTableHeader from './VDataTableHeader'\n// import VVirtualTable from './VVirtualTable'\nimport VIcon from '../VIcon'\nimport Row from './Row'\nimport RowGroup from './RowGroup'\nimport VSimpleCheckbox from '../VCheckbox/VSimpleCheckbox'\nimport VSimpleTable from './VSimpleTable'\nimport MobileRow from './MobileRow'\n\n// Mixins\nimport Loadable from '../../mixins/loadable'\n\n// Directives\nimport ripple from '../../directives/ripple'\n\n// Helpers\nimport mixins from '../../util/mixins'\nimport { deepEqual, getObjectValueByPath, getPrefixedScopedSlots, getSlot, defaultFilter, camelizeObjectKeys, getPropertyFromItem } from '../../util/helpers'\nimport { breaking } from '../../util/console'\nimport { mergeClasses } from '../../util/mergeData'\n\nfunction filterFn (item: any, search: string | null, filter: DataTableFilterFunction) {\n  return (header: DataTableHeader) => {\n    const value = getObjectValueByPath(item, header.value)\n    return header.filter ? header.filter(value, search, item) : filter(value, search, item)\n  }\n}\n\nfunction searchTableItems (\n  items: any[],\n  search: string | null,\n  headersWithCustomFilters: DataTableHeader[],\n  headersWithoutCustomFilters: DataTableHeader[],\n  customFilter: DataTableFilterFunction\n) {\n  search = typeof search === 'string' ? search.trim() : null\n\n  return items.filter(item => {\n    // Headers with custom filters are evaluated whether or not a search term has been provided.\n    // We need to match every filter to be included in the results.\n    const matchesColumnFilters = headersWithCustomFilters.every(filterFn(item, search, defaultFilter))\n\n    // Headers without custom filters are only filtered by the `search` property if it is defined.\n    // We only need a single column to match the search term to be included in the results.\n    const matchesSearchTerm = !search || headersWithoutCustomFilters.some(filterFn(item, search, customFilter))\n\n    return matchesColumnFilters && matchesSearchTerm\n  })\n}\n\n/* @vue/component */\nexport default mixins(\n  VDataIterator,\n  Loadable,\n).extend({\n  name: 'v-data-table',\n\n  // https://github.com/vuejs/vue/issues/6872\n  directives: {\n    ripple,\n  },\n\n  props: {\n    headers: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<DataTableHeader[]>,\n    showSelect: Boolean,\n    checkboxColor: String,\n    showExpand: Boolean,\n    showGroupBy: Boolean,\n    // TODO: Fix\n    // virtualRows: Boolean,\n    height: [Number, String],\n    hideDefaultHeader: Boolean,\n    caption: String,\n    dense: Boolean,\n    headerProps: Object,\n    calculateWidths: Boolean,\n    fixedHeader: Boolean,\n    headersLength: Number,\n    expandIcon: {\n      type: String,\n      default: '$expand',\n    },\n    customFilter: {\n      type: Function,\n      default: defaultFilter,\n    } as PropValidator<typeof defaultFilter>,\n    itemClass: {\n      type: [String, Function],\n      default: () => '',\n    } as PropValidator<RowClassFunction | string>,\n    loaderHeight: {\n      type: [Number, String],\n      default: 4,\n    },\n  },\n\n  data () {\n    return {\n      internalGroupBy: [] as string[],\n      openCache: {} as { [key: string]: boolean },\n      widths: [] as number[],\n    }\n  },\n\n  computed: {\n    computedHeaders (): DataTableHeader[] {\n      if (!this.headers) return []\n      const headers = this.headers.filter(h => h.value === undefined || !this.internalGroupBy.find(v => v === h.value))\n      const defaultHeader = { text: '', sortable: false, width: '1px' }\n\n      if (this.showSelect) {\n        const index = headers.findIndex(h => h.value === 'data-table-select')\n        if (index < 0) headers.unshift({ ...defaultHeader, value: 'data-table-select' })\n        else headers.splice(index, 1, { ...defaultHeader, ...headers[index] })\n      }\n\n      if (this.showExpand) {\n        const index = headers.findIndex(h => h.value === 'data-table-expand')\n        if (index < 0) headers.unshift({ ...defaultHeader, value: 'data-table-expand' })\n        else headers.splice(index, 1, { ...defaultHeader, ...headers[index] })\n      }\n\n      return headers\n    },\n    colspanAttrs (): object | undefined {\n      return this.isMobile ? undefined : {\n        colspan: this.headersLength || this.computedHeaders.length,\n      }\n    },\n    columnSorters (): Record<string, DataTableCompareFunction> {\n      return this.computedHeaders.reduce<Record<string, DataTableCompareFunction>>((acc, header) => {\n        if (header.sort) acc[header.value] = header.sort\n        return acc\n      }, {})\n    },\n    headersWithCustomFilters (): DataTableHeader[] {\n      return this.headers.filter(header => header.filter && (!header.hasOwnProperty('filterable') || header.filterable === true))\n    },\n    headersWithoutCustomFilters (): DataTableHeader[] {\n      return this.headers.filter(header => !header.filter && (!header.hasOwnProperty('filterable') || header.filterable === true))\n    },\n    sanitizedHeaderProps (): Record<string, any> {\n      return camelizeObjectKeys(this.headerProps)\n    },\n    computedItemsPerPage (): number {\n      const itemsPerPage = this.options && this.options.itemsPerPage ? this.options.itemsPerPage : this.itemsPerPage\n      const itemsPerPageOptions: DataItemsPerPageOption[] | undefined = this.sanitizedFooterProps.itemsPerPageOptions\n\n      if (\n        itemsPerPageOptions &&\n        !itemsPerPageOptions.find(item => typeof item === 'number' ? item === itemsPerPage : item.value === itemsPerPage)\n      ) {\n        const firstOption = itemsPerPageOptions[0]\n        return typeof firstOption === 'object' ? firstOption.value : firstOption\n      }\n\n      return itemsPerPage\n    },\n    groupByText (): string {\n      return this.headers?.find(header => header.value === this.internalGroupBy?.[0])?.text ?? ''\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['sort-icon', 'header-props.sort-icon'],\n      ['hide-headers', 'hide-default-header'],\n      ['select-all', 'show-select'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  mounted () {\n    // if ((!this.sortBy || !this.sortBy.length) && (!this.options.sortBy || !this.options.sortBy.length)) {\n    //   const firstSortable = this.headers.find(h => !('sortable' in h) || !!h.sortable)\n    //   if (firstSortable) this.updateOptions({ sortBy: [firstSortable.value], sortDesc: [false] })\n    // }\n\n    if (this.calculateWidths) {\n      window.addEventListener('resize', this.calcWidths)\n      this.calcWidths()\n    }\n  },\n\n  beforeDestroy () {\n    if (this.calculateWidths) {\n      window.removeEventListener('resize', this.calcWidths)\n    }\n  },\n\n  methods: {\n    calcWidths () {\n      this.widths = Array.from(this.$el.querySelectorAll('th')).map(e => e.clientWidth)\n    },\n    customFilterWithColumns (items: any[], search: string) {\n      return searchTableItems(items, search, this.headersWithCustomFilters, this.headersWithoutCustomFilters, this.customFilter)\n    },\n    customSortWithHeaders (items: any[], sortBy: string[], sortDesc: boolean[], locale: string) {\n      return this.customSort(items, sortBy, sortDesc, locale, this.columnSorters)\n    },\n    createItemProps (item: any, index: number): DataTableItemProps {\n      const props = VDataIterator.options.methods.createItemProps.call(this, item, index)\n\n      return Object.assign(props, { headers: this.computedHeaders })\n    },\n    genCaption (props: DataScopeProps) {\n      if (this.caption) return [this.$createElement('caption', [this.caption])]\n\n      return getSlot(this, 'caption', props, true)\n    },\n    genColgroup (props: DataScopeProps) {\n      return this.$createElement('colgroup', this.computedHeaders.map(header => {\n        return this.$createElement('col', {\n          class: {\n            divider: header.divider,\n          },\n        })\n      }))\n    },\n    genLoading () {\n      const th = this.$createElement('th', {\n        staticClass: 'column',\n        attrs: this.colspanAttrs,\n      }, [this.genProgress()])\n\n      const tr = this.$createElement('tr', {\n        staticClass: 'v-data-table__progress',\n      }, [th])\n\n      return this.$createElement('thead', [tr])\n    },\n    genHeaders (props: DataScopeProps) {\n      const data = {\n        props: {\n          ...this.sanitizedHeaderProps,\n          headers: this.computedHeaders,\n          options: props.options,\n          mobile: this.isMobile,\n          showGroupBy: this.showGroupBy,\n          checkboxColor: this.checkboxColor,\n          someItems: this.someItems,\n          everyItem: this.everyItem,\n          singleSelect: this.singleSelect,\n          disableSort: this.disableSort,\n        },\n        on: {\n          sort: props.sort,\n          group: props.group,\n          'toggle-select-all': this.toggleSelectAll,\n        },\n      }\n\n      // TODO: rename to 'head'? (thead, tbody, tfoot)\n      const children: VNodeChildrenArrayContents = [getSlot(this, 'header', {\n        ...data,\n        isMobile: this.isMobile,\n      })]\n\n      if (!this.hideDefaultHeader) {\n        const scopedSlots = getPrefixedScopedSlots('header.', this.$scopedSlots)\n        children.push(this.$createElement(VDataTableHeader, {\n          ...data,\n          scopedSlots,\n        }))\n      }\n\n      if (this.loading) children.push(this.genLoading())\n\n      return children\n    },\n    genEmptyWrapper (content: VNodeChildrenArrayContents) {\n      return this.$createElement('tr', {\n        staticClass: 'v-data-table__empty-wrapper',\n      }, [\n        this.$createElement('td', {\n          attrs: this.colspanAttrs,\n        }, content),\n      ])\n    },\n    genItems (items: any[], props: DataScopeProps) {\n      const empty = this.genEmpty(props.originalItemsLength, props.pagination.itemsLength)\n      if (empty) return [empty]\n\n      return props.groupedItems\n        ? this.genGroupedRows(props.groupedItems, props)\n        : this.genRows(items, props)\n    },\n    genGroupedRows (groupedItems: ItemGroup<any>[], props: DataScopeProps) {\n      return groupedItems.map(group => {\n        if (!this.openCache.hasOwnProperty(group.name)) this.$set(this.openCache, group.name, true)\n\n        if (this.$scopedSlots.group) {\n          return this.$scopedSlots.group({\n            group: group.name,\n            options: props.options,\n            isMobile: this.isMobile,\n            items: group.items,\n            headers: this.computedHeaders,\n          })\n        } else {\n          return this.genDefaultGroupedRow(group.name, group.items, props)\n        }\n      })\n    },\n    genDefaultGroupedRow (group: string, items: any[], props: DataScopeProps) {\n      const isOpen = !!this.openCache[group]\n      const children: VNodeChildren = [\n        this.$createElement('template', { slot: 'row.content' }, this.genRows(items, props)),\n      ]\n      const toggleFn = () => this.$set(this.openCache, group, !this.openCache[group])\n      const removeFn = () => props.updateOptions({ groupBy: [], groupDesc: [] })\n\n      if (this.$scopedSlots['group.header']) {\n        children.unshift(this.$createElement('template', { slot: 'column.header' }, [\n          this.$scopedSlots['group.header']!({\n            group,\n            groupBy: props.options.groupBy,\n            isMobile: this.isMobile,\n            items,\n            headers: this.computedHeaders,\n            isOpen,\n            toggle: toggleFn,\n            remove: removeFn,\n          }),\n        ]))\n      } else {\n        const toggle = this.$createElement(VBtn, {\n          staticClass: 'ma-0',\n          props: {\n            icon: true,\n            small: true,\n          },\n          on: {\n            click: toggleFn,\n          },\n        }, [this.$createElement(VIcon, [isOpen ? '$minus' : '$plus'])])\n\n        const remove = this.$createElement(VBtn, {\n          staticClass: 'ma-0',\n          props: {\n            icon: true,\n            small: true,\n          },\n          on: {\n            click: removeFn,\n          },\n        }, [this.$createElement(VIcon, ['$close'])])\n\n        const column = this.$createElement('td', {\n          staticClass: 'text-start',\n          attrs: this.colspanAttrs,\n        }, [toggle, `${this.groupByText}: ${group}`, remove])\n\n        children.unshift(this.$createElement('template', { slot: 'column.header' }, [column]))\n      }\n\n      if (this.$scopedSlots['group.summary']) {\n        children.push(this.$createElement('template', { slot: 'column.summary' }, [\n          this.$scopedSlots['group.summary']!({\n            group,\n            groupBy: props.options.groupBy,\n            isMobile: this.isMobile,\n            items,\n            headers: this.computedHeaders,\n            isOpen,\n            toggle: toggleFn,\n          }),\n        ]))\n      }\n\n      return this.$createElement(RowGroup, {\n        key: group,\n        props: {\n          value: isOpen,\n        },\n      }, children)\n    },\n    genRows (items: any[], props: DataScopeProps) {\n      return this.$scopedSlots.item ? this.genScopedRows(items, props) : this.genDefaultRows(items, props)\n    },\n    genScopedRows (items: any[], props: DataScopeProps) {\n      const rows = []\n\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i]\n        rows.push(this.$scopedSlots.item!({\n          ...this.createItemProps(item, i),\n          isMobile: this.isMobile,\n        }))\n\n        if (this.isExpanded(item)) {\n          rows.push(this.$scopedSlots['expanded-item']!({\n            headers: this.computedHeaders,\n            isMobile: this.isMobile,\n            index: i,\n            item,\n          }))\n        }\n      }\n\n      return rows\n    },\n    genDefaultRows (items: any[], props: DataScopeProps) {\n      return this.$scopedSlots['expanded-item']\n        ? items.map((item, index) => this.genDefaultExpandedRow(item, index))\n        : items.map((item, index) => this.genDefaultSimpleRow(item, index))\n    },\n    genDefaultExpandedRow (item: any, index: number): VNode {\n      const isExpanded = this.isExpanded(item)\n      const classes = {\n        'v-data-table__expanded v-data-table__expanded__row': isExpanded,\n      }\n      const headerRow = this.genDefaultSimpleRow(item, index, classes)\n      const expandedRow = this.$createElement('tr', {\n        staticClass: 'v-data-table__expanded v-data-table__expanded__content',\n      }, [this.$scopedSlots['expanded-item']!({\n        headers: this.computedHeaders,\n        isMobile: this.isMobile,\n        item,\n      })])\n\n      return this.$createElement(RowGroup, {\n        props: {\n          value: isExpanded,\n        },\n      }, [\n        this.$createElement('template', { slot: 'row.header' }, [headerRow]),\n        this.$createElement('template', { slot: 'row.content' }, [expandedRow]),\n      ])\n    },\n    genDefaultSimpleRow (item: any, index: number, classes: Record<string, boolean> = {}): VNode {\n      const scopedSlots = getPrefixedScopedSlots('item.', this.$scopedSlots)\n\n      const data = this.createItemProps(item, index)\n\n      if (this.showSelect) {\n        const slot = scopedSlots['data-table-select']\n        scopedSlots['data-table-select'] = slot ? () => slot({\n          ...data,\n          isMobile: this.isMobile,\n        }) : () => this.$createElement(VSimpleCheckbox, {\n          staticClass: 'v-data-table__checkbox',\n          props: {\n            value: data.isSelected,\n            disabled: !this.isSelectable(item),\n            color: this.checkboxColor ?? '',\n          },\n          on: {\n            input: (val: boolean) => data.select(val),\n          },\n        })\n      }\n\n      if (this.showExpand) {\n        const slot = scopedSlots['data-table-expand']\n        scopedSlots['data-table-expand'] = slot ? () => slot(data) : () => this.$createElement(VIcon, {\n          staticClass: 'v-data-table__expand-icon',\n          class: {\n            'v-data-table__expand-icon--active': data.isExpanded,\n          },\n          on: {\n            click: (e: MouseEvent) => {\n              e.stopPropagation()\n              data.expand(!data.isExpanded)\n            },\n          },\n        }, [this.expandIcon])\n      }\n\n      return this.$createElement(this.isMobile ? MobileRow : Row, {\n        key: getObjectValueByPath(item, this.itemKey),\n        class: mergeClasses(\n          { ...classes, 'v-data-table__selected': data.isSelected },\n          getPropertyFromItem(item, this.itemClass)\n        ),\n        props: {\n          headers: this.computedHeaders,\n          hideDefaultHeader: this.hideDefaultHeader,\n          index,\n          item,\n          rtl: this.$vuetify.rtl,\n        },\n        scopedSlots,\n        on: {\n          // TODO: for click, the first argument should be the event, and the second argument should be data,\n          // but this is a breaking change so it's for v3\n          click: () => this.$emit('click:row', item, data),\n          contextmenu: (event: MouseEvent) => this.$emit('contextmenu:row', event, data),\n          dblclick: (event: MouseEvent) => this.$emit('dblclick:row', event, data),\n        },\n      })\n    },\n    genBody (props: DataScopeProps): VNode | string | VNodeChildren {\n      const data = {\n        ...props,\n        expand: this.expand,\n        headers: this.computedHeaders,\n        isExpanded: this.isExpanded,\n        isMobile: this.isMobile,\n        isSelected: this.isSelected,\n        select: this.select,\n      }\n\n      if (this.$scopedSlots.body) {\n        return this.$scopedSlots.body!(data)\n      }\n\n      return this.$createElement('tbody', [\n        getSlot(this, 'body.prepend', data, true),\n        this.genItems(props.items, props),\n        getSlot(this, 'body.append', data, true),\n      ])\n    },\n    genFoot (props: DataScopeProps): VNode[] | undefined {\n      return this.$scopedSlots.foot?.(props)\n    },\n    genFooters (props: DataScopeProps) {\n      const data = {\n        props: {\n          options: props.options,\n          pagination: props.pagination,\n          itemsPerPageText: '$vuetify.dataTable.itemsPerPageText',\n          ...this.sanitizedFooterProps,\n        },\n        on: {\n          'update:options': (value: any) => props.updateOptions(value),\n        },\n        widths: this.widths,\n        headers: this.computedHeaders,\n      }\n\n      const children: VNodeChildren = [\n        getSlot(this, 'footer', data, true),\n      ]\n\n      if (!this.hideDefaultFooter) {\n        children.push(this.$createElement(VDataFooter, {\n          ...data,\n          scopedSlots: getPrefixedScopedSlots('footer.', this.$scopedSlots),\n        }))\n      }\n\n      return children\n    },\n    genDefaultScopedSlot (props: DataScopeProps): VNode {\n      const simpleProps = {\n        height: this.height,\n        fixedHeader: this.fixedHeader,\n        dense: this.dense,\n      }\n\n      // if (this.virtualRows) {\n      //   return this.$createElement(VVirtualTable, {\n      //     props: Object.assign(simpleProps, {\n      //       items: props.items,\n      //       height: this.height,\n      //       rowHeight: this.dense ? 24 : 48,\n      //       headerHeight: this.dense ? 32 : 48,\n      //       // TODO: expose rest of props from virtual table?\n      //     }),\n      //     scopedSlots: {\n      //       items: ({ items }) => this.genItems(items, props) as any,\n      //     },\n      //   }, [\n      //     this.proxySlot('body.before', [this.genCaption(props), this.genHeaders(props)]),\n      //     this.proxySlot('bottom', this.genFooters(props)),\n      //   ])\n      // }\n\n      return this.$createElement(VSimpleTable, {\n        props: simpleProps,\n        class: {\n          'v-data-table--mobile': this.isMobile,\n        },\n      }, [\n        this.proxySlot('top', getSlot(this, 'top', {\n          ...props,\n          isMobile: this.isMobile,\n        }, true)),\n        this.genCaption(props),\n        this.genColgroup(props),\n        this.genHeaders(props),\n        this.genBody(props),\n        this.genFoot(props),\n        this.proxySlot('bottom', this.genFooters(props)),\n      ])\n    },\n    proxySlot (slot: string, content: VNodeChildren) {\n      return this.$createElement('template', { slot }, content)\n    },\n  },\n\n  render (): VNode {\n    return this.$createElement(VData, {\n      props: {\n        ...this.$props,\n        customFilter: this.customFilterWithColumns,\n        customSort: this.customSortWithHeaders,\n        itemsPerPage: this.computedItemsPerPage,\n      },\n      on: {\n        'update:options': (v: DataOptions, old: DataOptions) => {\n          this.internalGroupBy = v.groupBy || []\n          !deepEqual(v, old) && this.$emit('update:options', v)\n        },\n        'update:page': (v: number) => this.$emit('update:page', v),\n        'update:items-per-page': (v: number) => this.$emit('update:items-per-page', v),\n        'update:sort-by': (v: string | string[]) => this.$emit('update:sort-by', v),\n        'update:sort-desc': (v: boolean | boolean[]) => this.$emit('update:sort-desc', v),\n        'update:group-by': (v: string | string[]) => this.$emit('update:group-by', v),\n        'update:group-desc': (v: boolean | boolean[]) => this.$emit('update:group-desc', v),\n        pagination: (v: DataPagination, old: DataPagination) => !deepEqual(v, old) && this.$emit('pagination', v),\n        'current-items': (v: any[]) => {\n          this.internalCurrentItems = v\n          this.$emit('current-items', v)\n        },\n        'page-count': (v: number) => this.$emit('page-count', v),\n      },\n      scopedSlots: {\n        default: this.genDefaultScopedSlot,\n      },\n    })\n  },\n})\n"]}]}